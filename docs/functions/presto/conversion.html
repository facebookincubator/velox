<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Conversion Functions &#8212; Velox  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css?v=0f882399" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="URL Functions" href="url.html" />
    <link rel="prev" title="JSON Functions" href="json.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="url.html" title="URL Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="json.html" title="JSON Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" accesskey="U">Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Conversion Functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="conversion-functions">
<h1>Conversion Functions<a class="headerlink" href="#conversion-functions" title="Link to this heading">¶</a></h1>
<p>During expression evaluations, Velox doesn’t implicitly convert expression
arguments to the correct types. If such a conversion is necessary, two provided
conversion functions can be used explicitly cast values to a particular type.</p>
<section id="id1">
<h2>Conversion Functions<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="cast">
<span class="sig-name descname"><span class="pre">cast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span> <span class="pre">AS</span> <span class="pre">type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">type</span></span></span><a class="headerlink" href="#cast" title="Link to this definition">¶</a></dt>
<dd><p>Explicitly cast a value as a type. This can be used to cast a varchar to a
numeric value type and vice versa.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="try_cast">
<span class="sig-name descname"><span class="pre">try_cast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span> <span class="pre">AS</span> <span class="pre">type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">type</span></span></span><a class="headerlink" href="#try_cast" title="Link to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#cast" title="cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">cast()</span></code></a>, but returns null if the cast fails. <code class="docutils literal notranslate"><span class="pre">try_cast(x</span> <span class="pre">AS</span> <span class="pre">type)</span></code>
is different from <code class="docutils literal notranslate"><span class="pre">try(cast(x</span> <span class="pre">AS</span> <span class="pre">type))</span></code> in that <code class="docutils literal notranslate"><span class="pre">try_cast</span></code> only suppresses
errors happening during the casting itself but not those during the evaluation
of its argument. For example, <code class="docutils literal notranslate"><span class="pre">try_cast(x</span> <span class="pre">/</span> <span class="pre">0</span> <span class="pre">as</span> <span class="pre">double)</span></code> throws a divide-by-0
error, while <code class="docutils literal notranslate"><span class="pre">try(cast(x</span> <span class="pre">/</span> <span class="pre">0</span> <span class="pre">as</span> <span class="pre">double))</span></code> returns a NULL.</p>
</dd></dl>

</section>
<section id="supported-conversions">
<h2>Supported Conversions<a class="headerlink" href="#supported-conversions" title="Link to this heading">¶</a></h2>
<p>The supported conversions are listed below, with from-types given at rows and to-types given at columns. Conversions of ARRAY, MAP, and ROW types
are supported if the conversion of their element types are supported. In addition,
supported conversions to/from JSON are listed in <a class="reference internal" href="json.html"><span class="doc">JSON Functions</span></a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
<col style="width: 5.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>tinyint</p></th>
<th class="head"><p>smallint</p></th>
<th class="head"><p>integer</p></th>
<th class="head"><p>bigint</p></th>
<th class="head"><p>boolean</p></th>
<th class="head"><p>real</p></th>
<th class="head"><p>double</p></th>
<th class="head"><p>varchar</p></th>
<th class="head"><p>varbinary</p></th>
<th class="head"><p>timestamp</p></th>
<th class="head"><p>timestamp with time zone</p></th>
<th class="head"><p>date</p></th>
<th class="head"><p>interval day to second</p></th>
<th class="head"><p>decimal</p></th>
<th class="head"><p>ipaddress</p></th>
<th class="head"><p>ipprefix</p></th>
<th class="head"><p>tdigest</p></th>
<th class="head"><p>qdigest</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tinyint</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>smallint</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>integer</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bigint</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>boolean</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>real</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>double</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>varchar</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>varbinary</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p>timestamp</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>timestamp with time zone</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>interval day to second</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>decimal</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ipaddress</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ipprefix</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tdigest</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>qdigest</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="cast-to-integral-types">
<h2>Cast to Integral Types<a class="headerlink" href="#cast-to-integral-types" title="Link to this heading">¶</a></h2>
<p>Integral types include bigint, integer, smallint, and tinyint.</p>
<section id="from-integral-types">
<h3>From integral types<a class="headerlink" href="#from-integral-types" title="Link to this heading">¶</a></h3>
<p>Casting one integral type to another is allowed when the input value is within
the range of the result type. Casting from invalid input values throws.</p>
<p>Valid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1234567</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1234567</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">12</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">12</span>
</pre></div>
</div>
<p>Invalid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1234</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1234567</span> <span class="k">as</span> <span class="n">smallint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
<section id="from-floating-point-types">
<h3>From floating-point types<a class="headerlink" href="#from-floating-point-types" title="Link to this heading">¶</a></h3>
<p>Casting from floating-point input to an integral type rounds the input value to
the closest integral value. It is allowed when the rounded result is within the
range of the result type. Casting from invalid input values throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">12345.12</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">12345</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">12345.67</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">12346</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">127.1</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">127</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">integer</span><span class="p">);</span> <span class="o">--</span> <span class="mi">0</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">smallint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">0</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">127.8</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">1234567.89</span> <span class="k">as</span> <span class="n">smallint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">infinity</span><span class="p">()</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
<p>Casting NaN to bigint returns 0 in Velox but throws in Presto. We keep the
behavior of Velox by intention because this is more consistent with other
supported cases.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="from-varchar">
<h3>From VARCHAR<a class="headerlink" href="#from-varchar" title="Link to this heading">¶</a></h3>
<p>Casting a string to an integral type is allowed if the string represents an
integral number within the range of the result type. By default, casting from
strings that represent floating-point numbers is not allowed.
Casting from invalid input values throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;12345&#39;</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">12345</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;+1&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;12345.67&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;12345.67&#39;</span> <span class="k">as</span> <span class="n">bigint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-1.8&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-1.&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;0.&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-.&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
</pre></div>
</div>
</section>
<section id="from-decimal">
<h3>From decimal<a class="headerlink" href="#from-decimal" title="Link to this heading">¶</a></h3>
<p>The decimal part is rounded.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">2.56</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">integer</span><span class="p">);</span> <span class="o">--</span> <span class="mi">3</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">3.46</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">integer</span><span class="p">);</span> <span class="o">--</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">214748364890</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">integer</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-boolean">
<h2>Cast to Boolean<a class="headerlink" href="#cast-to-boolean" title="Link to this heading">¶</a></h2>
<section id="from-integral-and-floating-point-types">
<h3>From integral and floating-point types<a class="headerlink" href="#from-integral-and-floating-point-types" title="Link to this heading">¶</a></h3>
<p>Casting from integral or floating-point numbers to boolean is allowed. Non-zero
numbers are converted to <cite>true</cite> while zero is converted to <cite>false</cite>.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">0</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">false</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">12</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">1.0</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">1.1</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">infinity</span><span class="p">()</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.0000000000001</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.5</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3>From VARCHAR<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>The strings <cite>t, f, 1, 0, true, false</cite> and their upper case equivalents are allowed to be casted to boolean.
Casting from other strings to boolean throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;0&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">false</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;t&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;true&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;f&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">false</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;false&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">false</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;F&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">false</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;T&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span> <span class="p">(</span><span class="n">case</span> <span class="n">insensitive</span><span class="p">)</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.7E308&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;infinity&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;12&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;tru&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;No&#39;</span> <span class="k">as</span> <span class="n">boolean</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-floating-point-types">
<h2>Cast to Floating-Point Types<a class="headerlink" href="#cast-to-floating-point-types" title="Link to this heading">¶</a></h2>
<section id="from-integral-or-floating-point-types">
<h3>From integral or floating-point types<a class="headerlink" href="#from-integral-or-floating-point-types" title="Link to this heading">¶</a></h3>
<p>Casting from an integral or floating-point number is allowed.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.0</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">123.45</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">123.45</span>
</pre></div>
</div>
<p>There are two cases where Velox behaves differently from Presto (<a class="reference external" href="https://github.com/facebookincubator/velox/issues/5934">#5934</a>) when casting
to real from a value beyond real’s limit. We will fix them to follow Presto’s
behavior.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">1.7E308</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Presto</span> <span class="n">returns</span> <span class="n">Infinity</span> <span class="n">but</span> <span class="n">Velox</span> <span class="n">throws</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="mf">1.7E308</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Presto</span> <span class="n">returns</span> <span class="o">-</span><span class="n">Infinity</span> <span class="n">but</span> <span class="n">Velox</span> <span class="n">throws</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>From VARCHAR<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>Casting a string to real is allowed if the string represents an integral or
floating-point number. Casting from invalid input values throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.0</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.0</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.7E308&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Infinity</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;Infinity&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Infinity</span> <span class="p">(</span><span class="n">case</span> <span class="n">sensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-Infinity&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="o">-</span><span class="n">Infinity</span> <span class="p">(</span><span class="n">case</span> <span class="n">sensitive</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">NaN</span> <span class="p">(</span><span class="n">case</span> <span class="n">sensitive</span><span class="p">)</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2a&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2.3&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;infinity&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-infinity&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="o">-</span><span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;InfiNiTy&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;INFINITY&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;nAn&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
</pre></div>
</div>
<p>Below cases are supported in Presto, but throw in Velox.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2f&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.2</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2f&#39;</span> <span class="k">as</span> <span class="n">double</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.2</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2d&#39;</span> <span class="k">as</span> <span class="n">real</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.2</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2d&#39;</span> <span class="k">as</span> <span class="n">double</span><span class="p">);</span> <span class="o">--</span> <span class="mf">1.2</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>From decimal<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>Casting from decimal to double, float or any integral type is allowed. During decimal to an integral type conversion, if result overflows, or underflows, an exception is thrown.</p>
<p>Valid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;10.001&#39;</span> <span class="k">as</span> <span class="n">double</span><span class="p">);</span> <span class="o">--</span> <span class="mf">10.001</span>
</pre></div>
</div>
<p>Invalid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;300.001&#39;</span> <span class="k">as</span> <span class="n">tinyint</span><span class="p">);</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-varchar">
<h2>Cast to VARCHAR<a class="headerlink" href="#cast-to-varchar" title="Link to this heading">¶</a></h2>
<p>Casting from scalar types to string is allowed.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">123</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;123&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">123.45</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;123.45&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">123.0</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;123.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;NaN&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">infinity</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;Infinity&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">true</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;true&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;1970-01-01 00:00:00&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1970-01-01 00:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;2024-06-01 11:37:15.123 America/New_York&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2024-06-01 11:37:15.123 America/New_York&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mf">22.51</span> <span class="k">as</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;22.510&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="mf">22.51</span> <span class="k">as</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-22.51&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mf">0.123</span> <span class="k">as</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;0.123&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mi">1</span> <span class="k">as</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mi">0</span> <span class="k">as</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;0.00&#39;</span>
</pre></div>
</div>
<section id="id5">
<h3>From Floating-Point Types<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p>By default, casting a real or double to string returns standard notation if the magnitude of input value is greater than
or equal to 10 <sup>-3</sup> but less than 10 <sup>7</sup>, and returns scientific notation otherwise.</p>
<p>Positive zero returns ‘0.0’ and negative zero returns ‘-0.0’. Positive infinity returns ‘Infinity’ and negative infinity
returns ‘-Infinity’. Positive and negative NaN returns ‘NaN’.</p>
<p>If legacy_cast configuration property is true, the result is standard notation for all input value.</p>
<p>Valid examples if legacy_cast = false,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;123456789.01234567&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.2345678901234567E8&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;10000000.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.0E7&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;12345.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;12345.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;-0.001&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.001&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;-0.00012&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-1.2E-4&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;0.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;0.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;-0.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">infinity</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;Infinity&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="n">infinity</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-Infinity&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;NaN&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="o">-</span><span class="n">nan</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;NaN&#39;</span>

<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;123456780.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.2345678E8&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;10000000.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.0E7&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;12345.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;12345.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;-0.001&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.001&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;-0.00012&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-1.2E-4&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;0.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;0.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;-0.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.0&#39;</span>
</pre></div>
</div>
<p>Valid examples if legacy_cast = true,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;123456789.01234567&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;123456789.01234567&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;10000000.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;10000000.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;-0.001&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.001&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">double</span> <span class="s1">&#39;-0.00012&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.00012&#39;</span>

<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;123456780.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;123456784.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;10000000.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;10000000.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;12345.0&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;12345.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;-0.00012&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0.00011999999696854502&#39;</span>
</pre></div>
</div>
</section>
<section id="from-date">
<h3>From DATE<a class="headerlink" href="#from-date" title="Link to this heading">¶</a></h3>
<p>Casting DATE to VARCHAR returns an ISO-8601 formatted string: YYYY-MM-DD.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="s1">&#39;2024-03-14&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2024-03-14&#39;</span>
</pre></div>
</div>
</section>
<section id="from-timestamp">
<h3>From TIMESTAMP<a class="headerlink" href="#from-timestamp" title="Link to this heading">¶</a></h3>
<p>By default, casting a timestamp to a string returns ISO 8601 format with space as separator
between date and time, and the year part is padded with zeros to 4 characters.</p>
<p>If legacy_cast configuration property is true, the result string uses character ‘T’
as separator between date and time and the year part is not padded.</p>
<p>Valid examples if legacy_cast = false,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;1970-01-01 00:00:00&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1970-01-01 00:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;2000-01-01 12:21:56.129&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2000-01-01 12:21:56.129&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;384-01-01 08:00:00.000&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;0384-01-01 08:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;10000-02-01 16:00:00.000&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;10000-02-01 16:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;-10-02-01 10:00:00.000&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-0010-02-01 10:00:00.000&#39;</span>
</pre></div>
</div>
<p>Valid examples if legacy_cast = true,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;1970-01-01 00:00:00&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1970-01-01T00:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;2000-01-01 12:21:56.129&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2000-01-01T12:21:56.129&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;384-01-01 08:00:00.000&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;384-01-01T08:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;-10-02-01 10:00:00.000&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-10-02-01T10:00:00.000&#39;</span>
</pre></div>
</div>
</section>
<section id="from-interval-day-to-second">
<h3>From INTERVAL DAY TO SECOND<a class="headerlink" href="#from-interval-day-to-second" title="Link to this heading">¶</a></h3>
<p>Casting INTERVAL DAY TO SECOND to VARCHAR returns a string formatted as
‘[sign]D HH:MM:SS.ZZZ’, where ‘sign’ is an optional ‘-’ sign if interval is negative, D
is the number of whole days in the interval, HH is then number of hours between 00 and
24, MM is the number of minutes between 00 and 59, SS is the number of seconds between
00 and 59, and zzz is the number of milliseconds between 000 and 999.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">interval</span> <span class="s1">&#39;1&#39;</span> <span class="n">day</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1 00:00:00.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">interval</span> <span class="s1">&#39;123456&#39;</span> <span class="n">second</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1 10:17:36.000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">date</span><span class="p">(</span><span class="s1">&#39;2024-03-01&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;35 09:15:54.092&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="s1">&#39;2024-03-01&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">now</span><span class="p">()</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;-35 09:16:20.598&#39;</span>
</pre></div>
</div>
</section>
<section id="from-ipaddress">
<h3>From IPADDRESS<a class="headerlink" href="#from-ipaddress" title="Link to this heading">¶</a></h3>
<p>Casting from IPADDRESS to VARCHAR returns a string formatted as x.x.x.x for IPV4 formatted IPV6 addresses.
For all other IPV6 addresses it will be formatted in compressed alternate form IPV6 defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.2">RFC 4291#section-2.2</a></p>
<p>IPV4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.4&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.2.3.4&#39;</span>
</pre></div>
</div>
<p>IPV6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2001:db8::ff00:42:8329&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;0:0:0:0:0:0:13.1.68.3&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;::13.1.68.3&#39;</span>
</pre></div>
</div>
<p>IPV4 mapped IPV6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;::ffff:ffff:ffff&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;255.255.255.255&#39;</span>
</pre></div>
</div>
</section>
<section id="from-ipprefix">
<h3>From IPPREFIX<a class="headerlink" href="#from-ipprefix" title="Link to this heading">¶</a></h3>
<p>Casting from IPPREFIX to VARCHAR returns a string formatted as <em>x.x.x.x/&lt;prefix-length&gt;</em> for IPv4 formatted IPv6 addresses.</p>
<p>For all other IPv6 addresses it will be formatted in compressed alternate form IPv6 defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.2">RFC 4291#section-2.2</a>
followed by <em>/&lt;prefix-length&gt;</em>. [<a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.3">RFC 4291#section-2.3</a>]</p>
<p>IPv4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipprefix</span> <span class="s1">&#39;1.2.0.0/16&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;1.2.0.0/16&#39;</span>
</pre></div>
</div>
<p>IPv6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipprefix</span> <span class="s1">&#39;2001:db8::ff00:42:8329/128&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;2001:db8::ff00:42:8329/128&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipprefix</span> <span class="s1">&#39;0:0:0:0:0:0:13.1.68.3/32&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;::/32&#39;</span>
</pre></div>
</div>
<p>IPv4 mapped IPv6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;::ffff:ffff:0000/16&#39;</span> <span class="k">as</span> <span class="n">varchar</span><span class="p">);</span> <span class="o">--</span> <span class="s1">&#39;255.255.0.0/16&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-varbinary">
<h2>Cast to VARBINARY<a class="headerlink" href="#cast-to-varbinary" title="Link to this heading">¶</a></h2>
<section id="id7">
<h3>From IPADDRESS<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<p>Returns the IPV6 address as a 16 byte varbinary string in network byte order.</p>
<p>Internally, the type is a pure IPv6 address. Support for IPv4 is handled using the IPv4-mapped IPv6 address range <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.5.5.2">(RFC 4291#section-2.5.5.2)</a>.
When creating an IPADDRESS, IPv4 addresses will be mapped into that range.</p>
<p>IPV6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329&#39;</span> <span class="k">as</span> <span class="n">varbinary</span><span class="p">);</span> <span class="o">--</span> <span class="mh">0x20010db8000000000000ff0000428329</span>
</pre></div>
</div>
<p>IPV4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2.3.4&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="mh">0x00000000000000000000ffff01020304</span>
</pre></div>
</div>
<p>IPV4 mapped IPV6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;::ffff:ffff:ffff&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="mh">0x00000000000000000000ffffffffffff</span>
</pre></div>
</div>
</section>
<section id="from-tdigest-double">
<h3>From TDIGEST(DOUBLE)<a class="headerlink" href="#from-tdigest-double" title="Link to this heading">¶</a></h3>
<p>Returns the T-digest as a varbinary string containing the serialized representation of the T-digest data structure.
This allows T-digests to be stored and retrieved for later use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">tdigest_agg</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mf">1.0</span> <span class="k">as</span> <span class="n">double</span><span class="p">))</span> <span class="k">as</span> <span class="n">varbinary</span><span class="p">);</span> <span class="o">--</span> <span class="n">AQAAAAAAAADwPwAAAAAAAPA</span><span class="o">/</span><span class="n">AAAAAAAA8D8AAAAAAABZQAAAAAAAAPA</span><span class="o">/</span><span class="n">AQAAAAAAAAAAAPA</span><span class="o">/</span><span class="n">AAAAAAAA8D8</span><span class="o">=</span>
</pre></div>
</div>
</section>
<section id="from-qdigest-bigint-qdigest-real-qdigest-double">
<h3>From QDIGEST(BIGINT), QDIGEST(REAL), QDIGEST(DOUBLE)<a class="headerlink" href="#from-qdigest-bigint-qdigest-real-qdigest-double" title="Link to this heading">¶</a></h3>
<p>Returns the quantile digest as a varbinary string containing the serialized representation of the quantile digest data structure.
This allows quantile digests to be stored and retrieved for later use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">qdigest_agg</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="mf">1.0</span> <span class="k">as</span> <span class="n">double</span><span class="p">))</span> <span class="k">as</span> <span class="n">varbinary</span><span class="p">);</span> <span class="o">--</span> <span class="n">AHsUrkfheoQ</span><span class="o">/</span><span class="n">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAPA</span><span class="o">/</span><span class="n">AAAAAAAA8D8BAAAAAAAAAAAAAPA</span><span class="o">/</span><span class="n">AAAAAAAA8L8</span><span class="o">=</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-timestamp">
<h2>Cast to TIMESTAMP<a class="headerlink" href="#cast-to-timestamp" title="Link to this heading">¶</a></h2>
<section id="id8">
<h3>From VARCHAR<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<p>Casting from a string to timestamp is allowed if the string represents a
timestamp in the format <cite>YYYY-MM-DD</cite> followed by an optional <cite>hh:mm:ss.MS</cite>.
Seconds and milliseconds are optional. Casting from invalid input values throws.</p>
<p>Valid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00:00.123&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.123</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 02:01&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">02</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00:00-02:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
<p>Invalid example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-Oct-23&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
</pre></div>
</div>
<p>Optionally, strings may also contain timezone information at the end. Timezone
information may be offsets in the format <cite>+01:00</cite> or <cite>-02:00</cite>, for example, or
timezone names, like <cite>UTC</cite>, <cite>Z</cite>, <cite>America/Los_Angeles</cite> and others,
<a class="reference external" href="https://github.com/facebookincubator/velox/blob/main/velox/type/tz/TimeZoneDatabase.cpp">as defined here</a>.</p>
<p>For example, these strings contain valid timezone information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00:00 +09:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00:00 UTC&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00:00 America/Sao_Paulo&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
</pre></div>
</div>
<p>If timezone information is specified in the string, the returned timestamp
is adjusted to the corresponding timezone. Otherwise, the timestamp is
assumed to be in the client session timezone, and adjusted accordingly
based on the value of <cite>adjust_timestamp_to_session_timezone</cite>, as described below.</p>
<p>The space between the hour and timezone definition is optional.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00 Z&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01 00:00Z&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
</pre></div>
</div>
<p>Are both valid.</p>
</section>
<section id="id9">
<h3>From DATE<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p>Casting from date to timestamp is allowed.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span> <span class="s1">&#39;1970-01-01&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span> <span class="s1">&#39;2012-03-09&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">09</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
</section>
<section id="from-timestamp-with-time-zone">
<h3>From TIMESTAMP WITH TIME ZONE<a class="headerlink" href="#from-timestamp-with-time-zone" title="Link to this heading">¶</a></h3>
<p>The results depend on whether configuration property <cite>adjust_timestamp_to_session_timezone</cite> is set or not.</p>
<p>If set to true, input timezone is ignored and timestamp is returned as is. For example,
“1970-01-01 00:00:00.000 America/Los_Angeles” becomes “1970-01-01 08:00:00.000”.</p>
<p>Otherwise, timestamp is shifted by the offset of the timezone. For example,
“1970-01-01 00:00:00.000 America/Los_Angeles” becomes “1970-01-01 00:00:00.000”.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- `adjust_timestamp_to_session_timezone` is true
SELECT to_unixtime(cast(timestamp &#39;1970-01-01 00:00:00 America/Los_Angeles&#39; as timestamp)); -- 28800.0 (1970-01-01 08:00:00.000)
SELECT to_unixtime(cast(timestamp &#39;2012-03-09 10:00:00 Asia/Chongqing&#39; as timestamp)); -- 1.3312584E9 (2012-03-09 02:00:00.000)
SELECT to_unixtime(cast(from_unixtime(0, &#39;+06:00&#39;) as timestamp)); -- 0.0 (1970-01-01 00:00:00.000)
SELECT to_unixtime(cast(from_unixtime(0, &#39;-02:00&#39;) as timestamp)); -- 0.0 (1970-01-01 00:00:00.000)

-- `adjust_timestamp_to_session_timezone` is false
SELECT to_unixtime(cast(timestamp &#39;1970-01-01 00:00:00 America/Los_Angeles&#39; as timestamp)); -- 0.0 (1970-01-01 00:00:00.000)
SELECT to_unixtime(cast(timestamp &#39;2012-03-09 10:00:00 Asia/Chongqing&#39; as timestamp)); -- 1.3312872E9 (2012-03-09 10:00:00.000)
SELECT to_unixtime(cast(from_unixtime(0, &#39;+06:00&#39;) as timestamp)); -- 21600.0 (1970-01-01 06:00:00.000)
SELECT to_unixtime(cast(from_unixtime(0, &#39;-02:00&#39;) as timestamp)); -- -7200.0 (1969-12-31 22:00:00.000)
</pre></div>
</div>
</section>
</section>
<section id="cast-to-timestamp-with-time-zone">
<h2>Cast to TIMESTAMP WITH TIME ZONE<a class="headerlink" href="#cast-to-timestamp-with-time-zone" title="Link to this heading">¶</a></h2>
<section id="id10">
<h3>From TIMESTAMP<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<p>The results depend on whether configuration property <cite>adjust_timestamp_to_session_timezone</cite> is set or not.</p>
<p>If set to true, the output is adjusted to be equivalent as the input timestamp in UTC
based on the user provided <cite>session_timezone</cite> (if any). For example, when user supplies
“America/Los_Angeles” “1970-01-01 00:00:00.000” becomes “1969-12-31 16:00:00.000 America/Los_Angeles”.</p>
<p>Otherwise, the user provided <cite>session_timezone</cite> (if any) is simply appended to the input
timestamp. For example, “1970-01-01 00:00:00.000” becomes “1970-01-01 00:00:00.000 America/Los_Angeles”.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- `adjust_timestamp_to_session_timezone` is true
SELECT cast(timestamp &#39;1970-01-01 00:00:00&#39; as timestamp with time zone); -- 1969-12-31 16:00:00.000 America/Los_Angeles
SELECT cast(timestamp &#39;2012-03-09 10:00:00&#39; as timestamp with time zone); -- 2012-03-09 02:00:00.000 America/Los_Angeles
SELECT cast(from_unixtime(0) as timestamp with time zone); -- 1969-12-31 16:00:00.000 America/Los_Angeles

-- `adjust_timestamp_to_session_timezone` is false
SELECT cast(timestamp &#39;1970-01-01 00:00:00&#39; as timestamp with time zone); -- 1970-01-01 00:00:00.000 America/Los_Angeles
SELECT cast(timestamp &#39;2012-03-09 10:00:00&#39; as timestamp with time zone); -- 2012-03-09 10:00:00.000 America/Los_Angeles
SELECT cast(from_unixtime(0) as timestamp with time zone); -- 1970-01-01 00:00:00.000 America/Los_Angeles
</pre></div>
</div>
</section>
<section id="id11">
<h3>From DATE<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<p>The results depend on <cite>session_timestamp</cite>.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">session_timezone</span> <span class="o">=</span> <span class="n">America</span><span class="o">/</span><span class="n">Los_Angeles</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span> <span class="s1">&#39;2024-06-01&#39;</span> <span class="k">as</span> <span class="n">timestamp</span> <span class="k">with</span> <span class="n">time</span> <span class="n">zone</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span> <span class="n">America</span><span class="o">/</span><span class="n">Los_Angeles</span>

<span class="o">--</span> <span class="n">session_timezone</span> <span class="o">=</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">date</span> <span class="s1">&#39;2024-06-01&#39;</span> <span class="k">as</span> <span class="n">timestamp</span> <span class="k">with</span> <span class="n">time</span> <span class="n">zone</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-date">
<h2>Cast to Date<a class="headerlink" href="#cast-to-date" title="Link to this heading">¶</a></h2>
<section id="id12">
<h3>From VARCHAR<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<p>Only ISO 8601 strings are supported: <cite>[+-]YYYY-MM-DD</cite>. Casting from invalid input values throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1970-01-01&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-10&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-10-23T123&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-10-23 (BC)&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-Oct-23&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012/10/23&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012.10.23&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2012-10-23 &#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">argument</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3>From TIMESTAMP<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<p>Casting from timestamp to date is allowed. If present, the part of <cite>hh:mm:ss</cite>
in the input is ignored.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;1970-01-01 00:00:00&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;1970-01-01 23:59:59&#39;</span> <span class="k">as</span> <span class="n">date</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3>From TIMESTAMP WITH TIME ZONE<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<p>Casting from TIMESTAMP WITH TIME ZONE to DATE is allowed. If present,
the part of <cite>hh:mm:ss</cite> in the input is ignored.</p>
<p>Session time zone does not affect the result.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">CAST</span><span class="p">(</span><span class="n">timestamp</span> <span class="s1">&#39;2024-06-01 01:38:00 America/New_York&#39;</span> <span class="k">as</span> <span class="n">DATE</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">01</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-decimal">
<h2>Cast to Decimal<a class="headerlink" href="#cast-to-decimal" title="Link to this heading">¶</a></h2>
<section id="from-boolean-type">
<h3>From boolean type<a class="headerlink" href="#from-boolean-type" title="Link to this heading">¶</a></h3>
<p>Casting a boolean number to decimal of given precision and scale is allowed.
True value is converted to 1 and false to 0.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">true</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;1.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">false</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0&#39;</span>
</pre></div>
</div>
</section>
<section id="id15">
<h3>From integral types<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<p>Casting an integral number to a decimal of given precision and scale is allowed
if the input value can be represented by the precision and scale. Casting from
invalid input values throws.</p>
<p>Valid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">1</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;1.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">10</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;10.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">123</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;123.00&#39;</span>
</pre></div>
</div>
<p>Invalid examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">123</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mi">123</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>From floating-point types<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<p>Casting a floating-point number to a decimal of given precision and scale is allowed
if the input value can be represented by the precision and scale. When the given
scale is less than the number of decimal places, the floating-point value is rounded.
The conversion precision is up to 15 for double and 6 for real according to the
significant decimal digits precision they provide. Casting from NaN or infinite value
throws.</p>
<p>Valid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.12</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.1200&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.12</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.1&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.19</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.2&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">0.123456789123123</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="mi">18</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.123456789123123000&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">real</span> <span class="s1">&#39;0.123456&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="mi">18</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.123456000000000000&#39;</span>
</pre></div>
</div>
<p>Invalid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">123.12</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="mf">99999.99</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>From decimal<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<p>Casting one decimal to another is allowed if the input value can be represented
by the result decimal type. When casting from a larger scale to a smaller one,
the fraction part is rounded.</p>
<p>Valid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;0.69&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.690&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;0.69&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.7&#39;</span>
</pre></div>
</div>
<p>Invalid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;-1000.000&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">decimal</span> <span class="s1">&#39;123456789&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">Out</span> <span class="n">of</span> <span class="nb">range</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3>From varchar<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<p>Casting varchar to a decimal of given precision and scale is allowed
if the input value can be represented by the precision and scale. When casting from
a larger scale to a smaller one, the fraction part is rounded. Casting from invalid input value throws.</p>
<p>Valid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;9999999999.99&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;9999999999.99&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.556&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;1.56&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.554&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;1.55&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-1.554&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;-1.55&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;+09&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;9.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;9.&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;9.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;.9&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.90&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;3E+2&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;300.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;3E+00002&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;300.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;3e+2&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;300.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;31.423e+2&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;3142.30&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2e-2&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.01&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2e-5&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.00&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;0000.123&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.12&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;.123000000&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">decimal</span> <span class="s1">&#39;0.12&#39;</span>
</pre></div>
</div>
<p>Invalid example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.23e67&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="n">too</span> <span class="n">large</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;0.0446a&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;23e-5d&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.23 &#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39; -3E+2&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;-3E+2.1&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;3E+&#39;</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span> <span class="o">--</span> <span class="n">Value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">number</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-ipaddress">
<h2>Cast to IPADDRESS<a class="headerlink" href="#cast-to-ipaddress" title="Link to this heading">¶</a></h2>
<section id="ipaddress-from-varchar">
<span id="id19"></span><h3>From VARCHAR<a class="headerlink" href="#ipaddress-from-varchar" title="Link to this heading">¶</a></h3>
<p>To cast a varchar to IPAddress input string must be in the form of either
IPV4 or IPV6.</p>
<p>For IPV4 it must be in the form of:
x.x.x.x where each x is an integer value between 0-255.</p>
<p>For IPV6 it must follow any of the forms defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.2">RFC 4291#section-2.2</a>.</p>
<p>Full form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2001</span><span class="p">:</span><span class="mi">0</span><span class="n">DB8</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0008</span><span class="p">:</span><span class="mi">0800</span><span class="p">:</span><span class="mi">200</span><span class="n">C</span><span class="p">:</span><span class="mi">417</span><span class="n">A</span>
<span class="mi">2001</span><span class="p">:</span><span class="n">DB8</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">800</span><span class="p">:</span><span class="mi">200</span><span class="n">C</span><span class="p">:</span><span class="mi">417</span><span class="n">A</span>
</pre></div>
</div>
<p>Compressed form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2001</span><span class="p">:</span><span class="n">DB8</span><span class="p">::</span><span class="mi">8</span><span class="p">:</span><span class="mi">800</span><span class="p">:</span><span class="mi">200</span><span class="n">C</span><span class="p">:</span><span class="mi">417</span><span class="n">A</span>
</pre></div>
</div>
<p>Alternate form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mf">13.1.68.3</span>
<span class="p">::</span><span class="mf">13.1.68.3</span>
</pre></div>
</div>
<p>Internally, the type is a pure IPv6 address. Support for IPv4 is handled using the IPv4-mapped IPv6 address range <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.5.5.2">(RFC 4291#section-2.5.5.2)</a>.
When creating an IPADDRESS, IPv4 addresses will be mapped into that range.</p>
<p>When formatting an IPADDRESS, any address within the mapped range will be formatted as an IPv4 address.
Other addresses will be formatted as IPv6 using the canonical format defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc5952.html">RFC 5952</a>.</p>
<p>Valid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;2001:db8::ff00:42:8329&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2.3.4&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.4&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;::ffff:ffff:ffff&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;255.255.255.255&#39;</span>
</pre></div>
</div>
<p>Invalid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:db8::1::1&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">IP</span> <span class="n">address</span> <span class="s1">&#39;2001:db8::1::1&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;789.1.1.1&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">IP</span> <span class="n">address</span> <span class="s1">&#39;789.1.1.1&#39;</span>
</pre></div>
</div>
</section>
<section id="from-varbinary">
<h3>From VARBINARY<a class="headerlink" href="#from-varbinary" title="Link to this heading">¶</a></h3>
<p>To cast a varbinary to IPAddress it must be either IPV4(4 Bytes)
or IPV6(16 Bytes) in network byte order.</p>
<p>IPV4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">01</span><span class="p">,</span> <span class="mi">02</span><span class="p">,</span> <span class="mi">03</span><span class="p">,</span> <span class="mi">04</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mf">1.2.3.4</span>
</pre></div>
</div>
<p>IPV6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0xb8</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span> <span class="mh">0x00</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mi">2001</span><span class="p">:</span><span class="n">db8</span><span class="p">::</span><span class="n">ff00</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">8329</span>
</pre></div>
</div>
<p>Internally, the type is a pure IPv6 address. Support for IPv4 is handled using the IPv4-mapped IPv6 address range <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.5.5.2">(RFC 4291#section-2.5.5.2)</a>.
When creating an IPADDRESS, IPv4 addresses will be mapped into that range.</p>
<p>When formatting an IPADDRESS, any address within the mapped range will be formatted as an IPv4 address.
Other addresses will be formatted as IPv6 using the canonical format defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc5952.html">RFC 5952</a>.</p>
<p>IPV6 mapped IPV4 address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mf">1.2.3.4</span>
</pre></div>
</div>
<p>Valid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s1">&#39;20010db8000000000000ff0000428329&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;2001:db8::ff00:42:8329&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s1">&#39;01020304&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.4&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s1">&#39;00000000000000000000ffff01020304&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.4&#39;</span>
</pre></div>
</div>
<p>Invalid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s1">&#39;f000001100&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">);</span> <span class="o">--</span> <span class="n">Invalid</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">binary</span> <span class="n">length</span><span class="p">:</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="id24">
<h3>From IPPREFIX<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h3>
<p>Returns the canonical(lowest) IPADDRESS in the subnet range.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipprefix</span> <span class="s1">&#39;1.2.3.4/24&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">)</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.0&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipprefix</span> <span class="s1">&#39;2001:db8::ff00:42:8329/64&#39;</span> <span class="k">as</span> <span class="n">ipaddress</span><span class="p">)</span> <span class="o">--</span> <span class="n">ipaddress</span> <span class="s1">&#39;2001:db8::&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-tdigest-double">
<h2>Cast to TDIGEST(DOUBLE)<a class="headerlink" href="#cast-to-tdigest-double" title="Link to this heading">¶</a></h2>
<section id="id25">
<h3>From VARBINARY<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h3>
<p>Returns a T-digest reconstructed from the varbinary string containing the serialized representation.
This allows previously stored T-digests to be restored for use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">stored_tdigest_binary</span> <span class="k">as</span> <span class="n">tdigest</span><span class="p">(</span><span class="n">double</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-qdigest-bigint-qdigest-real-qdigest-double">
<h2>Cast to QDIGEST(BIGINT), QDIGEST(REAL), QDIGEST(DOUBLE)<a class="headerlink" href="#cast-to-qdigest-bigint-qdigest-real-qdigest-double" title="Link to this heading">¶</a></h2>
<section id="id26">
<h3>From VARBINARY<a class="headerlink" href="#id26" title="Link to this heading">¶</a></h3>
<p>Returns a quantile digest reconstructed from the varbinary string containing the serialized representation.
This allows previously stored quantile digests to be restored for use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">stored_qdigest_binary</span> <span class="k">as</span> <span class="n">qdigest</span><span class="p">(</span><span class="n">bigint</span><span class="p">));</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">stored_qdigest_binary</span> <span class="k">as</span> <span class="n">qdigest</span><span class="p">(</span><span class="n">real</span><span class="p">));</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">stored_qdigest_binary</span> <span class="k">as</span> <span class="n">qdigest</span><span class="p">(</span><span class="n">double</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
<section id="cast-to-ipprefix">
<h2>Cast to IPPREFIX<a class="headerlink" href="#cast-to-ipprefix" title="Link to this heading">¶</a></h2>
<section id="id27">
<h3>From VARCHAR<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h3>
<p>The IPPREFIX string must be in the form of <em>&lt;ip_address&gt;/&lt;ip_prefix&gt;</em> as defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.3">RFC 4291#section-2.3</a>.
The IPADDRESS portion of the IPPREFIX follows the same rules as casting
<a class="reference external" href="#ipaddress-from-varchar">IPADDRESS from VARCHAR</a>.</p>
<p>The prefix portion must be &lt;= 32 if the IP is an IPv4 address or &lt;= 128 for an IPv6 address.
As with IPADDRESS, any IPv6 address in the form of an IPv4 mapped IPv6 address will be
interpreted as an IPv4 address. Only the canonical(smallest) IP address will be stored
in the IPPREFIX.</p>
<p>Examples:</p>
<p>Valid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329/32&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipprefix</span> <span class="s1">&#39;2001:0db8::/32&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;1.2.3.4/24&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipprefix</span> <span class="s1">&#39;1.2.3.0/24&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;::ffff:ffff:ffff/16&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">ipprefix</span> <span class="s1">&#39;255.255.0.0/16&#39;</span>
</pre></div>
</div>
<p>Invalid examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:db8::1::1/1&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">Cannot</span> <span class="n">cast</span> <span class="n">value</span> <span class="n">to</span> <span class="n">IPPREFIX</span><span class="p">:</span> <span class="mi">2001</span><span class="p">:</span><span class="n">db8</span><span class="p">::</span><span class="mi">1</span><span class="p">::</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329/129&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">Cannot</span> <span class="n">cast</span> <span class="n">value</span> <span class="n">to</span> <span class="n">IPPREFIX</span><span class="p">:</span> <span class="mi">2001</span><span class="p">:</span><span class="mi">0</span><span class="n">db8</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="n">ff00</span><span class="p">:</span><span class="mi">0042</span><span class="p">:</span><span class="mi">8329</span><span class="o">/</span><span class="mi">129</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2001:0db8:0000:0000:0000:ff00:0042:8329/-1&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">Cannot</span> <span class="n">cast</span> <span class="n">value</span> <span class="n">to</span> <span class="n">IPPREFIX</span><span class="p">:</span> <span class="mi">2001</span><span class="p">:</span><span class="mi">0</span><span class="n">db8</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="n">ff00</span><span class="p">:</span><span class="mi">0042</span><span class="p">:</span><span class="mi">8329</span><span class="o">/-</span><span class="mi">1</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;255.2.3.4/33&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">Cannot</span> <span class="n">cast</span> <span class="n">value</span> <span class="n">to</span> <span class="n">IPPREFIX</span><span class="p">:</span> <span class="mf">255.2.3.4</span><span class="o">/</span><span class="mi">33</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;::ffff:ffff:ffff/33&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">);</span> <span class="o">--</span> <span class="n">Cannot</span> <span class="n">cast</span> <span class="n">value</span> <span class="n">to</span> <span class="n">IPPREFIX</span><span class="p">:</span> <span class="p">::</span><span class="n">ffff</span><span class="p">:</span><span class="n">ffff</span><span class="p">:</span><span class="n">ffff</span><span class="o">/</span><span class="mi">33</span>
</pre></div>
</div>
</section>
<section id="id30">
<h3>From IPADDRESS<a class="headerlink" href="#id30" title="Link to this heading">¶</a></h3>
<p>Returns an IPPREFIX where the prefix length is the length of the entire IP address.
Prefix length for IPv4 is 32 and for IPv6 it is 128.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;1.2.3.4&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">)</span> <span class="o">--</span> <span class="n">ipprefix</span> <span class="s1">&#39;1.2.3.4/32&#39;</span>
<span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="n">ipaddress</span> <span class="s1">&#39;2001:db8::ff00:42:8329&#39;</span> <span class="k">as</span> <span class="n">ipprefix</span><span class="p">)</span> <span class="o">--</span> <span class="n">ipprefix</span> <span class="s1">&#39;2001:db8::ff00:42:8329/128&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="data-size-functions">
<h2>Data Size Functions<a class="headerlink" href="#data-size-functions" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="parse_presto_data_size">
<span class="sig-name descname"><span class="pre">parse_presto_data_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#parse_presto_data_size" title="Link to this definition">¶</a></dt>
<dd><p>Parses <code class="docutils literal notranslate"><span class="pre">string</span></code> of format <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">unit</span></code> into a number, where <code class="docutils literal notranslate"><span class="pre">value</span></code> is the fractional number of unit values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">parse_presto_data_size</span><span class="p">(</span><span class="s1">&#39;1B&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1</span>
<span class="n">SELECT</span> <span class="n">parse_presto_data_size</span><span class="p">(</span><span class="s1">&#39;1kB&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1024</span>
<span class="n">SELECT</span> <span class="n">parse_presto_data_size</span><span class="p">(</span><span class="s1">&#39;1MB&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">1048576</span>
<span class="n">SELECT</span> <span class="n">parse_presto_data_size</span><span class="p">(</span><span class="s1">&#39;2.3MB&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2411724</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="typeof">
<span class="sig-name descname"><span class="pre">typeof</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">varchar</span></span></span><a class="headerlink" href="#typeof" title="Link to this definition">¶</a></dt>
<dd><p>Returns the name of the type of x:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">typeof</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span> <span class="o">--</span> <span class="n">integer</span>
<span class="n">SELECT</span> <span class="n">typeof</span><span class="p">(</span><span class="mf">1.5</span><span class="p">);</span> <span class="o">--</span> <span class="n">double</span>
<span class="n">SELECT</span> <span class="n">typeof</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span> <span class="o">--</span> <span class="n">array</span><span class="p">(</span><span class="n">integer</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Conversion Functions</a><ul>
<li><a class="reference internal" href="#id1">Conversion Functions</a><ul>
<li><a class="reference internal" href="#cast"><code class="docutils literal notranslate"><span class="pre">cast()</span></code></a></li>
<li><a class="reference internal" href="#try_cast"><code class="docutils literal notranslate"><span class="pre">try_cast()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#supported-conversions">Supported Conversions</a></li>
<li><a class="reference internal" href="#cast-to-integral-types">Cast to Integral Types</a><ul>
<li><a class="reference internal" href="#from-integral-types">From integral types</a></li>
<li><a class="reference internal" href="#from-floating-point-types">From floating-point types</a></li>
<li><a class="reference internal" href="#from-varchar">From VARCHAR</a></li>
<li><a class="reference internal" href="#from-decimal">From decimal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-boolean">Cast to Boolean</a><ul>
<li><a class="reference internal" href="#from-integral-and-floating-point-types">From integral and floating-point types</a></li>
<li><a class="reference internal" href="#id2">From VARCHAR</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-floating-point-types">Cast to Floating-Point Types</a><ul>
<li><a class="reference internal" href="#from-integral-or-floating-point-types">From integral or floating-point types</a></li>
<li><a class="reference internal" href="#id3">From VARCHAR</a></li>
<li><a class="reference internal" href="#id4">From decimal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-varchar">Cast to VARCHAR</a><ul>
<li><a class="reference internal" href="#id5">From Floating-Point Types</a></li>
<li><a class="reference internal" href="#from-date">From DATE</a></li>
<li><a class="reference internal" href="#from-timestamp">From TIMESTAMP</a></li>
<li><a class="reference internal" href="#from-interval-day-to-second">From INTERVAL DAY TO SECOND</a></li>
<li><a class="reference internal" href="#from-ipaddress">From IPADDRESS</a></li>
<li><a class="reference internal" href="#from-ipprefix">From IPPREFIX</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-varbinary">Cast to VARBINARY</a><ul>
<li><a class="reference internal" href="#id7">From IPADDRESS</a></li>
<li><a class="reference internal" href="#from-tdigest-double">From TDIGEST(DOUBLE)</a></li>
<li><a class="reference internal" href="#from-qdigest-bigint-qdigest-real-qdigest-double">From QDIGEST(BIGINT), QDIGEST(REAL), QDIGEST(DOUBLE)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-timestamp">Cast to TIMESTAMP</a><ul>
<li><a class="reference internal" href="#id8">From VARCHAR</a></li>
<li><a class="reference internal" href="#id9">From DATE</a></li>
<li><a class="reference internal" href="#from-timestamp-with-time-zone">From TIMESTAMP WITH TIME ZONE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-timestamp-with-time-zone">Cast to TIMESTAMP WITH TIME ZONE</a><ul>
<li><a class="reference internal" href="#id10">From TIMESTAMP</a></li>
<li><a class="reference internal" href="#id11">From DATE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-date">Cast to Date</a><ul>
<li><a class="reference internal" href="#id12">From VARCHAR</a></li>
<li><a class="reference internal" href="#id13">From TIMESTAMP</a></li>
<li><a class="reference internal" href="#id14">From TIMESTAMP WITH TIME ZONE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-decimal">Cast to Decimal</a><ul>
<li><a class="reference internal" href="#from-boolean-type">From boolean type</a></li>
<li><a class="reference internal" href="#id15">From integral types</a></li>
<li><a class="reference internal" href="#id16">From floating-point types</a></li>
<li><a class="reference internal" href="#id17">From decimal</a></li>
<li><a class="reference internal" href="#id18">From varchar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-ipaddress">Cast to IPADDRESS</a><ul>
<li><a class="reference internal" href="#ipaddress-from-varchar">From VARCHAR</a></li>
<li><a class="reference internal" href="#from-varbinary">From VARBINARY</a></li>
<li><a class="reference internal" href="#id24">From IPPREFIX</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-tdigest-double">Cast to TDIGEST(DOUBLE)</a><ul>
<li><a class="reference internal" href="#id25">From VARBINARY</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-qdigest-bigint-qdigest-real-qdigest-double">Cast to QDIGEST(BIGINT), QDIGEST(REAL), QDIGEST(DOUBLE)</a><ul>
<li><a class="reference internal" href="#id26">From VARBINARY</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cast-to-ipprefix">Cast to IPPREFIX</a><ul>
<li><a class="reference internal" href="#id27">From VARCHAR</a></li>
<li><a class="reference internal" href="#id30">From IPADDRESS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-size-functions">Data Size Functions</a><ul>
<li><a class="reference internal" href="#parse_presto_data_size"><code class="docutils literal notranslate"><span class="pre">parse_presto_data_size()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a><ul>
<li><a class="reference internal" href="#typeof"><code class="docutils literal notranslate"><span class="pre">typeof()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="json.html"
                          title="previous chapter">JSON Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="url.html"
                          title="next chapter">URL Functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/functions/presto/conversion.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="url.html" title="URL Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="json.html" title="JSON Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" >Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Conversion Functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright TBD.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>