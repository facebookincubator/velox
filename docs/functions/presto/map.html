<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Map Functions &#8212; Velox  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css?v=0f882399" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Regular Expression Functions" href="regexp.html" />
    <link rel="prev" title="Array Functions" href="array.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="regexp.html" title="Regular Expression Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="array.html" title="Array Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" accesskey="U">Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Map Functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="map-functions">
<h1>Map Functions<a class="headerlink" href="#map-functions" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="all_keys_match">
<span class="sig-name descname"><span class="pre">all_keys_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#all_keys_match" title="Link to this definition">¶</a></dt>
<dd><p>Returns whether all keys of a map match the given predicate. Returns true if all the keys match the predicate (a special case is when the map is empty); false if one or more keys don’t match; NULL if the predicate function returns NULL for one or more keys and true for all other keys.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">all_keys_match</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="any_keys_match">
<span class="sig-name descname"><span class="pre">any_keys_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#any_keys_match" title="Link to this definition">¶</a></dt>
<dd><p>Returns whether any keys of a map match the given predicate. Returns true if one or more keys match the predicate; false if none of the keys match (a special case is when the map is empty); NULL if the predicate function returns NULL for one or more keys and false for all other keys.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">any_keys_match</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="any_values_match">
<span class="sig-name descname"><span class="pre">any_values_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#any_values_match" title="Link to this definition">¶</a></dt>
<dd><p>Returns whether any values of a map matches the given predicate. Returns true if one or more values match the predicate; false if none of the values match (a special case is when the map is empty); NULL if the predicate function returns NULL for one or more values and false for all other values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">ANY_VALUES_MATCH</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cardinality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span></dt>
<dd><p>Returns the cardinality (size) of the map <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">element_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">V</span></span></span></dt>
<dd><p>Returns value for given <code class="docutils literal notranslate"><span class="pre">key</span></code>, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the key is not contained in the map.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map">
<span class="sig-name descname"><span class="pre">map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">map&lt;unknown,</span> <span class="pre">unknown&gt;</span></span></span><a class="headerlink" href="#map" title="Link to this definition">¶</a></dt>
<dd><p>Returns an empty map.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">map</span><span class="p">();</span> <span class="o">--</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array(K)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(V))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span></dt>
<dd><blockquote>
<div><p>Returns a map created using the given key/value arrays. Keys are not allowed to be null or to contain nulls.
For REAL and DOUBLE, NaNs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="aggregate.html#map_agg" title="map_agg"><code class="xref py py-func docutils literal notranslate"><span class="pre">map_agg()</span></code></a> for creating a map as an aggregation.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_append">
<span class="sig-name descname"><span class="pre">map_append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(V))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_append" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map with new key-value pairs appended to the input map. The new keys are provided in the first array parameter and corresponding values in the second array parameter.
Keys and values arrays must have the same length. New keys must not already exist in the input map. Duplicate keys in the new keys array are not allowed.
Null keys are ignored. Null values are preserved in the output map. For REAL and DOUBLE, NaNs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_append</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="mi">40</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_append</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_append</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">null</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">40</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_append</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="mi">30</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">null</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_append</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_update">
<span class="sig-name descname"><span class="pre">map_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(V))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_update" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map with values updated for the specified keys. If a key exists in the input map, its value is updated in place (preserving original order). If a key doesn’t exist, it is added to the end of the map.
Keys and values arrays must have the same length. Duplicate keys in the keys array are not allowed.
Null keys are ignored. Null values are preserved in the output map. For REAL and DOUBLE, NaNs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_update</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="mi">400</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_update</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span> <span class="o">-&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="o">-&gt;</span> <span class="mi">300</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_update</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="mi">20</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">null</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_update</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_concat">
<span class="sig-name descname"><span class="pre">map_concat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map1(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map2(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapN(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_concat" title="Link to this definition">¶</a></dt>
<dd><p>Returns the union of all the given maps. If a key is found in multiple given maps,
that key’s value in the resulting map comes from the last one of those maps.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_entries">
<span class="sig-name descname"><span class="pre">map_entries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V))</span> <span class="pre">-&gt;</span> <span class="pre">array(row(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_entries" title="Link to this definition">¶</a></dt>
<dd><p>Returns an array of all entries in the given map.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_entries</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]));</span> <span class="o">--</span> <span class="p">[</span><span class="n">ROW</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">ROW</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_filter">
<span class="sig-name descname"><span class="pre">map_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_filter" title="Link to this definition">¶</a></dt>
<dd><p>Constructs a map from those entries of <code class="docutils literal notranslate"><span class="pre">map</span></code> for which <code class="docutils literal notranslate"><span class="pre">function</span></code> returns true:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_filter</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">map_filter</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="n">IS</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">10</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="mi">30</span> <span class="o">-&gt;</span> <span class="n">c</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_filter</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;k3&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="n">k1</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="n">k3</span> <span class="o">-&gt;</span> <span class="mi">15</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_from_entries">
<span class="sig-name descname"><span class="pre">map_from_entries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array(row(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_from_entries" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map created from the given array of entries. Keys are not allowed to be null or to contain nulls.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_from_entries</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="s1">&#39;y&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_normalize">
<span class="sig-name descname"><span class="pre">map_normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(varchar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">double))</span> <span class="pre">-&gt;</span> <span class="pre">map(varchar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">double</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_normalize" title="Link to this definition">¶</a></dt>
<dd><p>Returns the map with the same keys but all non-null values scaled proportionally
so that the sum of values becomes 1. Map entries with null values remain unchanged.</p>
<p>When total sum of non-null values is zero, null values remain null,
zero, NaN, Infinity and -Infinity values become NaN,
positive values become Infinity, negative values become -Infinity.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_normalize</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]));</span> <span class="o">--</span> <span class="p">{</span><span class="n">a</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">0.5</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_normalize</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]));</span> <span class="o">--</span> <span class="p">{</span><span class="n">a</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">0.5</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_normalize</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]));</span> <span class="o">--</span> <span class="p">{</span><span class="n">a</span><span class="o">=</span><span class="n">Infinity</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">NaN</span><span class="p">,</span> <span class="n">c</span><span class="o">=-</span><span class="n">Infinity</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_values_in_range">
<span class="sig-name descname"><span class="pre">map_values_in_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_bound)</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_values_in_range" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map containing only the entries from the input map whose values
fall within the specified range [lower_bound, upper_bound] (inclusive).
Entries with values less than lower_bound or greater than upper_bound are removed.
Entries with null values are preserved in the output.
V must be a numeric type (integer, bigint, real, or double).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_values_in_range</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]),</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">35</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_values_in_range</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">]),</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="mf">2.5</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_values_in_range</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="mi">50</span><span class="p">]),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">null</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">50</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_values_in_range</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">500</span><span class="p">]),</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">50</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_remove_null_values">
<span class="sig-name descname"><span class="pre">map_remove_null_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_remove_null_values" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map by removing all the keys in input map with null values. If input
is null, output is null. If input map is empty, output map is empty.</p>
<blockquote>
<div><p>SELECT map_remove_null_values(MAP(ARRAY[‘ab’, ‘bc’, ‘cd’], ARRAY[null, null, null])); – {}
SELECT map_remove_null_values(MAP(ARRAY[], ARRAY[])); – {}
SELECT map_remove_null_values(MAP(ARRAY[1, 2, 3], ARRAY[3, 4, NULL])); – {1=3, 2=4}
SELECT map_remove_null_values(NULL); – NULL</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="remap_keys">
<span class="sig-name descname"><span class="pre">remap_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remap_keys" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map with keys remapped according to the oldKeys and newKeys arrays.
Unmapped keys remain unchanged. Values are preserved. Null keys are ignored.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">remap_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">100</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">300</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">remap_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="s1">&#39;charlie&#39;</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="n">alpha</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">charlie</span> <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">remap_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="n">null</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">100</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span> <span class="o">-&gt;</span> <span class="n">null</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">30</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">remap_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">20</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_subset">
<span class="sig-name descname"><span class="pre">map_subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(k))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_subset" title="Link to this definition">¶</a></dt>
<dd><p>Constructs a map from those entries of <code class="docutils literal notranslate"><span class="pre">map</span></code> for which the key is in the array given
For keys containing REAL and DOUBLE, NANs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_subset</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">map_subset</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_subset</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_subset</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">map_subset</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_intersect">
<span class="sig-name descname"><span class="pre">map_intersect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_intersect" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map containing only the entries from the input map whose keys are present in the given array.
This function is equivalent to map_subset. Null keys in the array are ignored.
For keys containing REAL and DOUBLE, NANs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_intersect</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="o">-&gt;</span><span class="s1">&#39;c&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_intersect</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">map_intersect</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">map_intersect</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_except">
<span class="sig-name descname"><span class="pre">map_except</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(k))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_except" title="Link to this definition">¶</a></dt>
<dd><p>Constructs a map from those entries of <code class="docutils literal notranslate"><span class="pre">map</span></code> for which the key is not in the array given.
For keys containing REAL and DOUBLE, NANs (Not-a-Number) are considered equal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_except</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">-&gt;</span><span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_except</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">2</span><span class="o">-&gt;</span><span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_except</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">2</span><span class="o">-&gt;</span><span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_except</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span><span class="o">-&gt;</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">-&gt;</span><span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_except</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="o">--</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_keys_overlap">
<span class="sig-name descname"><span class="pre">map_keys_overlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(K)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#map_keys_overlap" title="Link to this definition">¶</a></dt>
<dd><p>Returns true if any key in the map matches any element in the given array, false otherwise.
Returns false if either the map or array is empty. Null keys in the array are ignored.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_keys_overlap</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">map_keys_overlap</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span> <span class="o">--</span> <span class="n">false</span>
<span class="n">SELECT</span> <span class="n">map_keys_overlap</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span> <span class="o">--</span> <span class="n">true</span>
<span class="n">SELECT</span> <span class="n">map_keys_overlap</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="o">--</span> <span class="n">false</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_top_n">
<span class="sig-name descname"><span class="pre">map_top_n</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n)</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_top_n" title="Link to this definition">¶</a></dt>
<dd><p>Truncates map items. Keeps only the top N elements by value. Keys are used to break ties with the max key being chosen. Both keys and values should be orderable.</p>
<p><code class="docutils literal notranslate"><span class="pre">n</span></code> must be a non-negative BIGINT value.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_top_n</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span> <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">map_top_n</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="n">NULL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">NULL</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span> <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="o">-&gt;</span> <span class="n">NULL</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_keys_by_top_n_values">
<span class="sig-name descname"><span class="pre">map_keys_by_top_n_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n)</span> <span class="pre">-&gt;</span> <span class="pre">array(K</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_keys_by_top_n_values" title="Link to this definition">¶</a></dt>
<dd><p>Returns an array of the top N keys from a map. Keeps only the top N elements by value. Keys are used to break ties with the max key being chosen. Both keys and values should be orderable.</p>
<p><code class="docutils literal notranslate"><span class="pre">n</span></code> must be a non-negative BIGINT value.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_keys_by_top_n_values</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="n">SELECT</span> <span class="n">map_keys_by_top_n_values</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="n">NULL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">NULL</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_top_n_keys">
<span class="sig-name descname"><span class="pre">map_top_n_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n)</span> <span class="pre">-&gt;</span> <span class="pre">array(K</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_top_n_keys" title="Link to this definition">¶</a></dt>
<dd><p>Constructs an array of the top N keys. Keys should be orderable.</p>
<p><code class="docutils literal notranslate"><span class="pre">n</span></code> must be a non-negative BIGINT value.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_top_n_keys</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="n">SELECT</span> <span class="n">map_top_n_keys</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span> <span class="o">---</span> <span class="p">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_top_n_values">
<span class="sig-name descname"><span class="pre">map_top_n_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n)</span> <span class="pre">-&gt;</span> <span class="pre">array(V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_top_n_values" title="Link to this definition">¶</a></dt>
<dd><p>Returns top N values from a map, by sorting its values in descending order. Both keys and values should be orderable.</p>
<p><code class="docutils literal notranslate"><span class="pre">n</span></code> must be a non-negative BIGINT value.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_top_n_values</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">---</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_keys">
<span class="sig-name descname"><span class="pre">map_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V))</span> <span class="pre">-&gt;</span> <span class="pre">array(K</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_keys" title="Link to this definition">¶</a></dt>
<dd><p>Returns all the keys in the map <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_values">
<span class="sig-name descname"><span class="pre">map_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V))</span> <span class="pre">-&gt;</span> <span class="pre">array(V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_values" title="Link to this definition">¶</a></dt>
<dd><p>Returns all the values in the map <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="map_zip_with">
<span class="sig-name descname"><span class="pre">map_zip_with</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V2)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V3))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#map_zip_with" title="Link to this definition">¶</a></dt>
<dd><p>Merges the two given maps into a single map by applying <code class="docutils literal notranslate"><span class="pre">function</span></code> to the pair of values with the same key.
For keys only presented in one map, NULL will be passed as the value for the missing key.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">map_zip_with</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">ad</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">be</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="n">cf</span><span class="p">}</span>
                    <span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]),</span>
                    <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">concat</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">));</span>
<span class="n">SELECT</span> <span class="n">map_zip_with</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="o">--</span> <span class="p">{</span><span class="n">k1</span> <span class="o">-&gt;</span> <span class="n">ROW</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">null</span><span class="p">),</span> <span class="n">k2</span> <span class="o">-&gt;</span> <span class="n">ROW</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">k3</span> <span class="o">-&gt;</span> <span class="n">ROW</span><span class="p">(</span><span class="n">null</span><span class="p">,</span> <span class="mi">9</span><span class="p">)}</span>
                    <span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;k3&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]),</span>
                    <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">));</span>
<span class="n">SELECT</span> <span class="n">map_zip_with</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">]),</span> <span class="o">--</span> <span class="p">{</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="p">,</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">b4</span><span class="p">,</span> <span class="n">c</span> <span class="o">-&gt;</span> <span class="n">c9</span><span class="p">}</span>
                    <span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span>
                    <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">||</span> <span class="n">CAST</span><span class="p">(</span><span class="n">v1</span><span class="o">/</span><span class="n">v2</span> <span class="n">AS</span> <span class="n">VARCHAR</span><span class="p">));</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="multimap_from_entries">
<span class="sig-name descname"><span class="pre">multimap_from_entries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array(row(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array(V)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multimap_from_entries" title="Link to this definition">¶</a></dt>
<dd><p>Returns a multimap created from the given array of entries. Each key can be associated with multiple values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">multimap_from_entries</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)]);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="no_keys_match">
<span class="sig-name descname"><span class="pre">no_keys_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#no_keys_match" title="Link to this definition">¶</a></dt>
<dd><p>Returns whether no keys of a map match the given predicate. Returns true if none of the keys match the predicate (a special case is when the map is empty); false if one or more keys match; NULL if the predicate function returns NULL for one or more keys and false for all other keys.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">no_keys_match</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;d&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="no_values_match">
<span class="sig-name descname"><span class="pre">no_values_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boolean)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">boolean</span></span></span><a class="headerlink" href="#no_values_match" title="Link to this definition">¶</a></dt>
<dd><p>Returns whether no values of a map match the given predicate. Returns true if none of the values match the predicate (a special case is when the map is empty); false if one or more values match; NULL if the predicate function returns NULL for one or more values and false for all other values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">no_values_match</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;d&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="n">true</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">subscript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">V</span></span></span></dt>
<dd><blockquote>
<div><p>Returns value for given <code class="docutils literal notranslate"><span class="pre">key</span></code>. Return null if the key is not contained in the map.
For REAL and DOUBLE, NaNs (Not-a-Number) are considered equal and can be used as keys.
Corresponds to SQL subscript operator [].</p>
<p>SELECT name_to_age_map[‘Bob’] AS bob_age;</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="transform_keys">
<span class="sig-name descname"><span class="pre">transform_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K2))</span> <span class="pre">-&gt;</span> <span class="pre">map(K2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transform_keys" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map that applies <code class="docutils literal notranslate"><span class="pre">function</span></code> to each entry of <code class="docutils literal notranslate"><span class="pre">map</span></code> and transforms the keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">transform_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">transform_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="n">b</span><span class="p">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="n">c</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">*</span> <span class="n">v</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span> <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">||</span> <span class="n">CAST</span><span class="p">(</span><span class="n">v</span> <span class="k">as</span> <span class="n">VARCHAR</span><span class="p">));</span> <span class="o">--</span> <span class="p">{</span><span class="n">a1</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b2</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_keys</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">]),</span> <span class="o">--</span> <span class="p">{</span><span class="n">one</span> <span class="o">-&gt;</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">two</span> <span class="o">-&gt;</span> <span class="mf">1.4</span><span class="p">}</span>
                      <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">])[</span><span class="n">k</span><span class="p">]);</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="transform_values">
<span class="sig-name descname"><span class="pre">transform_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V2))</span> <span class="pre">-&gt;</span> <span class="pre">map(K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transform_values" title="Link to this definition">¶</a></dt>
<dd><p>Returns a map that applies <code class="docutils literal notranslate"><span class="pre">function</span></code> to each entry of <code class="docutils literal notranslate"><span class="pre">map</span></code> and transforms the values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">transform_values</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[],</span> <span class="n">ARRAY</span><span class="p">[]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="o">--</span> <span class="p">{}</span>
<span class="n">SELECT</span> <span class="n">transform_values</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">+</span> <span class="n">k</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">33</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_values</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">*</span> <span class="n">k</span><span class="p">);</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_values</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k</span> <span class="o">||</span> <span class="n">CAST</span><span class="p">(</span><span class="n">v</span> <span class="k">as</span> <span class="n">VARCHAR</span><span class="p">));</span> <span class="o">--</span> <span class="p">{</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a1</span><span class="p">,</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">b2</span><span class="p">}</span>
<span class="n">SELECT</span> <span class="n">transform_values</span><span class="p">(</span><span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">]),</span> <span class="o">--</span> <span class="p">{</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">one_1</span><span class="mf">.0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">two_1</span><span class="mf">.4</span><span class="p">}</span>
                        <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MAP</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">])[</span><span class="n">k</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;_&#39;</span> <span class="o">||</span> <span class="n">CAST</span><span class="p">(</span><span class="n">v</span> <span class="n">AS</span> <span class="n">VARCHAR</span><span class="p">));</span>
</pre></div>
</div>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Map Functions</a><ul>
<li><a class="reference internal" href="#all_keys_match"><code class="docutils literal notranslate"><span class="pre">all_keys_match()</span></code></a></li>
<li><a class="reference internal" href="#any_keys_match"><code class="docutils literal notranslate"><span class="pre">any_keys_match()</span></code></a></li>
<li><a class="reference internal" href="#any_values_match"><code class="docutils literal notranslate"><span class="pre">any_values_match()</span></code></a></li>
<li><a class="reference internal" href="#map"><code class="docutils literal notranslate"><span class="pre">map()</span></code></a></li>
<li><a class="reference internal" href="#map_append"><code class="docutils literal notranslate"><span class="pre">map_append()</span></code></a></li>
<li><a class="reference internal" href="#map_update"><code class="docutils literal notranslate"><span class="pre">map_update()</span></code></a></li>
<li><a class="reference internal" href="#map_concat"><code class="docutils literal notranslate"><span class="pre">map_concat()</span></code></a></li>
<li><a class="reference internal" href="#map_entries"><code class="docutils literal notranslate"><span class="pre">map_entries()</span></code></a></li>
<li><a class="reference internal" href="#map_filter"><code class="docutils literal notranslate"><span class="pre">map_filter()</span></code></a></li>
<li><a class="reference internal" href="#map_from_entries"><code class="docutils literal notranslate"><span class="pre">map_from_entries()</span></code></a></li>
<li><a class="reference internal" href="#map_normalize"><code class="docutils literal notranslate"><span class="pre">map_normalize()</span></code></a></li>
<li><a class="reference internal" href="#map_values_in_range"><code class="docutils literal notranslate"><span class="pre">map_values_in_range()</span></code></a></li>
<li><a class="reference internal" href="#map_remove_null_values"><code class="docutils literal notranslate"><span class="pre">map_remove_null_values()</span></code></a></li>
<li><a class="reference internal" href="#remap_keys"><code class="docutils literal notranslate"><span class="pre">remap_keys()</span></code></a></li>
<li><a class="reference internal" href="#map_subset"><code class="docutils literal notranslate"><span class="pre">map_subset()</span></code></a></li>
<li><a class="reference internal" href="#map_intersect"><code class="docutils literal notranslate"><span class="pre">map_intersect()</span></code></a></li>
<li><a class="reference internal" href="#map_except"><code class="docutils literal notranslate"><span class="pre">map_except()</span></code></a></li>
<li><a class="reference internal" href="#map_keys_overlap"><code class="docutils literal notranslate"><span class="pre">map_keys_overlap()</span></code></a></li>
<li><a class="reference internal" href="#map_top_n"><code class="docutils literal notranslate"><span class="pre">map_top_n()</span></code></a></li>
<li><a class="reference internal" href="#map_keys_by_top_n_values"><code class="docutils literal notranslate"><span class="pre">map_keys_by_top_n_values()</span></code></a></li>
<li><a class="reference internal" href="#map_top_n_keys"><code class="docutils literal notranslate"><span class="pre">map_top_n_keys()</span></code></a></li>
<li><a class="reference internal" href="#map_top_n_values"><code class="docutils literal notranslate"><span class="pre">map_top_n_values()</span></code></a></li>
<li><a class="reference internal" href="#map_keys"><code class="docutils literal notranslate"><span class="pre">map_keys()</span></code></a></li>
<li><a class="reference internal" href="#map_values"><code class="docutils literal notranslate"><span class="pre">map_values()</span></code></a></li>
<li><a class="reference internal" href="#map_zip_with"><code class="docutils literal notranslate"><span class="pre">map_zip_with()</span></code></a></li>
<li><a class="reference internal" href="#multimap_from_entries"><code class="docutils literal notranslate"><span class="pre">multimap_from_entries()</span></code></a></li>
<li><a class="reference internal" href="#no_keys_match"><code class="docutils literal notranslate"><span class="pre">no_keys_match()</span></code></a></li>
<li><a class="reference internal" href="#no_values_match"><code class="docutils literal notranslate"><span class="pre">no_values_match()</span></code></a></li>
<li><a class="reference internal" href="#transform_keys"><code class="docutils literal notranslate"><span class="pre">transform_keys()</span></code></a></li>
<li><a class="reference internal" href="#transform_values"><code class="docutils literal notranslate"><span class="pre">transform_values()</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="array.html"
                          title="previous chapter">Array Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="regexp.html"
                          title="next chapter">Regular Expression Functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/functions/presto/map.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="regexp.html" title="Regular Expression Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="array.html" title="Array Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" >Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Map Functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright TBD.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>