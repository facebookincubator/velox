<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Date and Time Functions and Operators &#8212; Velox  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css?v=0f882399" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Array Functions" href="array.html" />
    <link rel="prev" title="String Functions" href="string.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="array.html" title="Array Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="string.html" title="String Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" accesskey="U">Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Date and Time Functions and Operators</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="date-and-time-functions-and-operators">
<h1>Date and Time Functions and Operators<a class="headerlink" href="#date-and-time-functions-and-operators" title="Link to this heading">¶</a></h1>
<section id="date-and-time-operators">
<h2>Date and Time Operators<a class="headerlink" href="#date-and-time-operators" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 60.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span> <span class="pre">+</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">hour</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">01:00:01.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span> <span class="pre">'1970-01-01</span> <span class="pre">00:00:00.000'</span> <span class="pre">+</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1970-01-01</span> <span class="pre">00:00:01.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">hour</span> <span class="pre">-</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:59:59.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span> <span class="pre">'1970-01-01</span> <span class="pre">00:00:00.000'</span> <span class="pre">-</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1969-12-31</span> <span class="pre">23:59:59.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span> <span class="pre">*</span> <span class="pre">2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:00:02.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:00:02.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span> <span class="pre">*</span> <span class="pre">0.001</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:00:00.001</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.001</span> <span class="pre">*</span> <span class="pre">interval</span> <span class="pre">'1'</span> <span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:00:00.001</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">'15'</span> <span class="pre">second</span> <span class="pre">/</span> <span class="pre">1.5</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">00:00:10.000</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="plus">
<span class="sig-name descname"><span class="pre">plus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">[same</span> <span class="pre">as</span> <span class="pre">x]</span></span></span><a class="headerlink" href="#plus" title="Link to this definition">¶</a></dt>
<dd><p>Returns the sum of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. Both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are intervals day
to second or one of them can be timestamp. For addition of two intervals day to
second, returns <code class="docutils literal notranslate"><span class="pre">-106751991167</span> <span class="pre">07:12:55.808</span></code> when the addition overflows
in positive and returns <code class="docutils literal notranslate"><span class="pre">106751991167</span> <span class="pre">07:12:55.807</span></code> when the addition
overflows in negative. When addition of a timestamp with an interval day to
second, overflowed results are wrapped around.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="minus">
<span class="sig-name descname"><span class="pre">minus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">[same</span> <span class="pre">as</span> <span class="pre">x]</span></span></span><a class="headerlink" href="#minus" title="Link to this definition">¶</a></dt>
<dd><p>Returns the result of subtracting <code class="docutils literal notranslate"><span class="pre">y</span></code> from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Both <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>
are intervals day to second or <code class="docutils literal notranslate"><span class="pre">x</span></code> can be timestamp. For subtraction of
two intervals day to second, returns <code class="docutils literal notranslate"><span class="pre">-106751991167</span> <span class="pre">07:12:55.808</span></code> when
the subtraction overflows in positive and returns <code class="docutils literal notranslate"><span class="pre">106751991167</span> <span class="pre">07:12:55.807</span></code>
when the subtraction overflows in negative. For subtraction of an interval
day to second from a timestamp, overflowed results are wrapped around.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="multiply">
<span class="sig-name descname"><span class="pre">multiply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></span><a class="headerlink" href="#multiply" title="Link to this definition">¶</a></dt>
<dd><p>Returns the result of multiplying <code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></code> by <code class="docutils literal notranslate"><span class="pre">x</span></code>.
<code class="docutils literal notranslate"><span class="pre">x</span></code> can be a bigint or double. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is NaN. Returns
<code class="docutils literal notranslate"><span class="pre">106751991167</span> <span class="pre">07:12:55.807</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is infinity or when the
multiplication overflow in positive. Returns <code class="docutils literal notranslate"><span class="pre">-106751991167</span> <span class="pre">07:12:55.808</span></code>
when <code class="docutils literal notranslate"><span class="pre">x</span></code> is -infinity or when the multiplication overflow in negiative.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">multiply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></span><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd><p>Returns the result of multiplying <code class="docutils literal notranslate"><span class="pre">x</span></code> by <code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></code>.
Same as <code class="docutils literal notranslate"><span class="pre">multiply(interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second,</span> <span class="pre">x)</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="divide">
<span class="sig-name descname"><span class="pre">divide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></span></span><a class="headerlink" href="#divide" title="Link to this definition">¶</a></dt>
<dd><p>Returns the result of <code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></code> divided by <code class="docutils literal notranslate"><span class="pre">x</span></code>. <code class="docutils literal notranslate"><span class="pre">x</span></code> is
a double. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is NaN or is infinity. Returns
<code class="docutils literal notranslate"><span class="pre">106751991167</span> <span class="pre">07:12:55.807</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is <code class="docutils literal notranslate"><span class="pre">0.0</span></code> and
<code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></code> is not <code class="docutils literal notranslate"><span class="pre">0</span></code>, or when the division overflows in
positive. Returns <code class="docutils literal notranslate"><span class="pre">-106751991167</span> <span class="pre">07:12:55.808</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is <code class="docutils literal notranslate"><span class="pre">-0.0</span></code> and
<code class="docutils literal notranslate"><span class="pre">interval</span> <span class="pre">day</span> <span class="pre">to</span> <span class="pre">second</span></code> is not <code class="docutils literal notranslate"><span class="pre">0</span></code>, or when the division overflows in
negiative.</p>
</dd></dl>

</section>
<section id="date-and-time-functions">
<h2>Date and Time Functions<a class="headerlink" href="#date-and-time-functions" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="current_date">
<span class="sig-name descname"><span class="pre">current_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">date</span></span></span><a class="headerlink" href="#current_date" title="Link to this definition">¶</a></dt>
<dd><p>Returns the current date.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="date">
<span class="sig-name descname"><span class="pre">date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">date</span></span></span><a class="headerlink" href="#date" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <code class="docutils literal notranslate"><span class="pre">CAST(x</span> <span class="pre">AS</span> <span class="pre">date)</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="from_iso8601_date">
<span class="sig-name descname"><span class="pre">from_iso8601_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">date</span></span></span><a class="headerlink" href="#from_iso8601_date" title="Link to this definition">¶</a></dt>
<dd><p>Parses the ISO 8601 formatted <code class="docutils literal notranslate"><span class="pre">string</span></code> into a <code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<p>Accepts formats described by the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">yyyy</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span> <span class="n">MM</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span> <span class="n">dd</span><span class="p">]]</span>
</pre></div>
</div>
<p>Examples of valid input strings:</p>
<ul class="simple">
<li><p>‘2012’</p></li>
<li><p>‘2012-4’</p></li>
<li><p>‘2012-04’</p></li>
<li><p>‘2012-4-7’</p></li>
<li><p>‘2012-04-07’</p></li>
<li><p>‘2012-04-07   ‘</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="from_iso8601_timestamp">
<span class="sig-name descname"><span class="pre">from_iso8601_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span><a class="headerlink" href="#from_iso8601_timestamp" title="Link to this definition">¶</a></dt>
<dd><p>Parses the ISO 8601 formatted string into a timestamp with time zone.</p>
<p>Accepts formats described by the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datetime</span>          <span class="o">=</span> <span class="n">time</span> <span class="o">|</span> <span class="n">date</span><span class="o">-</span><span class="n">opt</span><span class="o">-</span><span class="n">time</span>
<span class="n">time</span>              <span class="o">=</span> <span class="s1">&#39;T&#39;</span> <span class="n">time</span><span class="o">-</span><span class="n">element</span> <span class="p">[</span><span class="n">offset</span><span class="p">]</span>
<span class="n">date</span><span class="o">-</span><span class="n">opt</span><span class="o">-</span><span class="n">time</span>     <span class="o">=</span> <span class="n">date</span><span class="o">-</span><span class="n">element</span> <span class="p">[</span><span class="s1">&#39;T&#39;</span> <span class="p">[</span><span class="n">time</span><span class="o">-</span><span class="n">element</span><span class="p">]</span> <span class="p">[</span><span class="n">offset</span><span class="p">]]</span>
<span class="n">date</span><span class="o">-</span><span class="n">element</span>      <span class="o">=</span> <span class="n">yyyy</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span> <span class="n">MM</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span> <span class="n">dd</span><span class="p">]]</span>
<span class="n">time</span><span class="o">-</span><span class="n">element</span>      <span class="o">=</span> <span class="n">HH</span> <span class="p">[</span><span class="n">minute</span><span class="o">-</span><span class="n">element</span><span class="p">]</span> <span class="o">|</span> <span class="p">[</span><span class="n">fraction</span><span class="p">]</span>
<span class="n">minute</span><span class="o">-</span><span class="n">element</span>    <span class="o">=</span> <span class="s1">&#39;:&#39;</span> <span class="n">mm</span> <span class="p">[</span><span class="n">second</span><span class="o">-</span><span class="n">element</span><span class="p">]</span> <span class="o">|</span> <span class="p">[</span><span class="n">fraction</span><span class="p">]</span>
<span class="n">second</span><span class="o">-</span><span class="n">element</span>    <span class="o">=</span> <span class="s1">&#39;:&#39;</span> <span class="n">ss</span> <span class="p">[</span><span class="n">fraction</span><span class="p">]</span>
<span class="n">fraction</span>          <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="n">digit</span><span class="o">+</span>
<span class="n">offset</span>            <span class="o">=</span> <span class="s1">&#39;Z&#39;</span> <span class="o">|</span> <span class="p">((</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="n">HH</span> <span class="p">[</span><span class="s1">&#39;:&#39;</span> <span class="n">mm</span> <span class="p">[</span><span class="s1">&#39;:&#39;</span> <span class="n">ss</span> <span class="p">[(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="n">SSS</span><span class="p">]]])</span>
</pre></div>
</div>
<p>Examples of valid input strings:</p>
<ul class="simple">
<li><p>‘2012’</p></li>
<li><p>‘2012-4’</p></li>
<li><p>‘2012-04’</p></li>
<li><p>‘2012-4-7’</p></li>
<li><p>‘2012-04-07’</p></li>
<li><p>‘2012-04-07   ‘</p></li>
<li><p>‘2012-04T01:02’</p></li>
<li><p>‘T01:02:34’</p></li>
<li><p>‘T01:02:34,123’</p></li>
<li><p>‘2012-04-07T01:02:34’</p></li>
<li><p>‘2012-04-07T01:02:34.123’</p></li>
<li><p>‘2012-04-07T01:02:34,123’</p></li>
<li><p>‘2012-04-07T01:02:34.123Z’</p></li>
<li><p>‘2012-04-07T01:02:34.123-05:00’</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="from_unixtime">
<span class="sig-name descname"><span class="pre">from_unixtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unixtime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span></span></span><a class="headerlink" href="#from_unixtime" title="Link to this definition">¶</a></dt>
<dd><p>Returns the UNIX timestamp <code class="docutils literal notranslate"><span class="pre">unixtime</span></code> as a timestamp.  If the
<a class="reference internal" href="../../configs.html"><span class="doc">adjust_timestamp_to_session_timezone</span></a> property is set
to true, then the timestamp is adjusted to the time zone specified in
<a class="reference internal" href="../../configs.html"><span class="doc">session_timezone</span></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">from_unixtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unixtime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span></dt>
<dd><p>Returns the UNIX timestamp <code class="docutils literal notranslate"><span class="pre">unixtime</span></code> as a timestamp with time zone
using <code class="docutils literal notranslate"><span class="pre">string</span></code> for the time zone.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">from_unixtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unixtime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hours</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minutes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd><p>Returns the UNIX timestamp <code class="docutils literal notranslate"><span class="pre">unixtime</span></code> as a timestamp with time zone
using <code class="docutils literal notranslate"><span class="pre">hours</span></code> and <code class="docutils literal notranslate"><span class="pre">minutes</span></code> for the time zone offset.
The offset must be in [-14:00, 14:00] range.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="to_iso8601">
<span class="sig-name descname"><span class="pre">to_iso8601</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">varchar</span></span></span><a class="headerlink" href="#to_iso8601" title="Link to this definition">¶</a></dt>
<dd><p>Formats <code class="docutils literal notranslate"><span class="pre">x</span></code> as an ISO 8601 string. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE.</p>
<p>Example results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">to_iso8601</span><span class="p">(</span><span class="n">current_date</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">06</span>
<span class="n">SELECT</span> <span class="n">to_iso8601</span><span class="p">(</span><span class="n">now</span><span class="p">());</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">06</span><span class="n">T20</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mf">46.726</span><span class="o">-</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span>
<span class="n">SELECT</span> <span class="n">to_iso8601</span><span class="p">(</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">interval</span> <span class="s1">&#39;6&#39;</span> <span class="n">month</span><span class="p">);</span> <span class="o">--</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">06</span><span class="n">T20</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mf">11.992</span><span class="o">-</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="to_milliseconds">
<span class="sig-name descname"><span class="pre">to_milliseconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#to_milliseconds" title="Link to this definition">¶</a></dt>
<dd><p>Returns the day-to-second <code class="docutils literal notranslate"><span class="pre">interval</span></code> as milliseconds.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="to_unixtime">
<span class="sig-name descname"><span class="pre">to_unixtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">double</span></span></span><a class="headerlink" href="#to_unixtime" title="Link to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> as a UNIX timestamp.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="current_timezone">
<span class="sig-name descname"><span class="pre">current_timezone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">varchar</span></span></span><a class="headerlink" href="#current_timezone" title="Link to this definition">¶</a></dt>
<dd><p>Returns the current session time zone as a varchar.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">current_timezone</span><span class="p">;</span>   <span class="o">--</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Kolkata</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="current_timestamp">
<span class="sig-name descname"><span class="pre">current_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span><a class="headerlink" href="#current_timestamp" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="now">
<span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span><a class="headerlink" href="#now" title="Link to this definition">¶</a></dt>
<dd><p>Returns the current timestamp with session time zone applied.
The timestamp is captured once at the start of query execution and remains
constant throughout the query. This matches the standard SQL behavior for
<code class="docutils literal notranslate"><span class="pre">CURRENT_TIMESTAMP</span></code> and <code class="docutils literal notranslate"><span class="pre">NOW()</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">current_timestamp</span><span class="p">;</span>  <span class="o">--</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">17</span> <span class="mi">14</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">12.123</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Kolkata</span>
<span class="n">SELECT</span> <span class="n">now</span><span class="p">();</span>              <span class="o">--</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">17</span> <span class="mi">14</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">12.123</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Kolkata</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="truncation-function">
<h2>Truncation Function<a class="headerlink" href="#truncation-function" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">date_trunc</span></code> function supports the following units:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>Example Truncated Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-22</span> <span class="pre">03:04:05.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">minute</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-22</span> <span class="pre">03:04:00.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hour</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-22</span> <span class="pre">03:00:00.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">day</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-22</span> <span class="pre">00:00:00.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">week</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-20</span> <span class="pre">00:00:00.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">month</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-08-01</span> <span class="pre">00:00:00.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">quarter</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-07-01</span> <span class="pre">00:00:00.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">year</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2001-01-01</span> <span class="pre">00:00:00.000</span></code></p></td>
</tr>
</tbody>
</table>
<p>The above examples use the timestamp <code class="docutils literal notranslate"><span class="pre">2001-08-22</span> <span class="pre">03:04:05.321</span></code> as the input.</p>
<dl class="py function">
<dt class="sig sig-object py" id="date_trunc">
<span class="sig-name descname"><span class="pre">date_trunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">x</span></span></span><a class="headerlink" href="#date_trunc" title="Link to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">x</span></code> truncated to <code class="docutils literal notranslate"><span class="pre">unit</span></code>. The supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are TIMESTAMP, DATE, and TIMESTAMP WITH TIME ZONE.</p>
</dd></dl>

</section>
<section id="interval-functions">
<h2>Interval Functions<a class="headerlink" href="#interval-functions" title="Link to this heading">¶</a></h2>
<p>The functions in this section support the following interval units:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">millisecond</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Milliseconds</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">second</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Seconds</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">minute</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Minutes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hour</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Hours</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">day</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Days</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">week</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Weeks</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">month</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Months</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">quarter</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Quarters</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">year</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">year</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Years</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="date_add">
<span class="sig-name descname"><span class="pre">date_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">x</span></span></span><a class="headerlink" href="#date_add" title="Link to this definition">¶</a></dt>
<dd><p>Adds an interval <code class="docutils literal notranslate"><span class="pre">value</span></code> of type <code class="docutils literal notranslate"><span class="pre">unit</span></code> to <code class="docutils literal notranslate"><span class="pre">x</span></code>. The supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are TIMESTAMP, DATE, and TIMESTAMP WITH TIME ZONE.
Subtraction can be performed by using a negative value.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="date_diff">
<span class="sig-name descname"><span class="pre">date_diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#date_diff" title="Link to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">x2</span> <span class="pre">-</span> <span class="pre">x1</span></code> in terms of <code class="docutils literal notranslate"><span class="pre">unit</span></code>. The supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are TIMESTAMP and DATE.</p>
</dd></dl>

</section>
<section id="duration-function">
<h2>Duration Function<a class="headerlink" href="#duration-function" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">parse_duration</span></code> function supports the following units:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ns</span></code></p></td>
<td><p>Nanoseconds</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">us</span></code></p></td>
<td><p>Microseconds</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ms</span></code></p></td>
<td><p>Milliseconds</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Seconds</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>Minutes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">h</span></code></p></td>
<td><p>Hours</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p>Days</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="parse_duration">
<span class="sig-name descname"><span class="pre">parse_duration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">interval</span></span></span><a class="headerlink" href="#parse_duration" title="Link to this definition">¶</a></dt>
<dd><p>Parses <code class="docutils literal notranslate"><span class="pre">string</span></code> of format <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">unit</span></code> into an interval, where
<code class="docutils literal notranslate"><span class="pre">value</span></code> is fractional number of <code class="docutils literal notranslate"><span class="pre">unit</span></code> values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;42.8ms&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">0</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.043</span>
<span class="n">SELECT</span> <span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;3.81 d&#39;</span><span class="p">);</span> <span class="o">--</span> <span class="mi">3</span> <span class="mi">19</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mf">24.000</span>
<span class="n">SELECT</span> <span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;5m&#39;</span><span class="p">);</span>     <span class="o">--</span> <span class="mi">0</span> <span class="mi">00</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mf">00.000</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="mysql-date-functions">
<h2>MySQL Date Functions<a class="headerlink" href="#mysql-date-functions" title="Link to this heading">¶</a></h2>
<p>The functions in this section use a format string that is compatible with
the MySQL <code class="docutils literal notranslate"><span class="pre">date_parse</span></code> and <code class="docutils literal notranslate"><span class="pre">str_to_date</span></code> functions.
The following table, based on the MySQL manual, describes the format specifiers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Specifier</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%a</span></code></p></td>
<td><p>Abbreviated weekday name (<code class="docutils literal notranslate"><span class="pre">Sun</span></code> … <code class="docutils literal notranslate"><span class="pre">Sat</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%b</span></code></p></td>
<td><p>Abbreviated month name (<code class="docutils literal notranslate"><span class="pre">Jan</span></code> … <code class="docutils literal notranslate"><span class="pre">Dec</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%c</span></code></p></td>
<td><p>Month, numeric (<code class="docutils literal notranslate"><span class="pre">1</span></code> … <code class="docutils literal notranslate"><span class="pre">12</span></code>) <a class="footnote-reference brackets" href="#id12" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%D</span></code></p></td>
<td><p>Day of the month with English suffix (<code class="docutils literal notranslate"><span class="pre">0th</span></code>, <code class="docutils literal notranslate"><span class="pre">1st</span></code>, <code class="docutils literal notranslate"><span class="pre">2nd</span></code>, <code class="docutils literal notranslate"><span class="pre">3rd</span></code>, …)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%d</span></code></p></td>
<td><p>Day of the month, numeric (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">31</span></code>) <a class="footnote-reference brackets" href="#id12" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%e</span></code></p></td>
<td><p>Day of the month, numeric (<code class="docutils literal notranslate"><span class="pre">1</span></code> … <code class="docutils literal notranslate"><span class="pre">31</span></code>) <a class="footnote-reference brackets" href="#id12" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%f</span></code></p></td>
<td><p>Fraction of second (6 digits for printing: <code class="docutils literal notranslate"><span class="pre">000000</span></code> … <code class="docutils literal notranslate"><span class="pre">999000</span></code>; 1 - 9 digits for parsing: <code class="docutils literal notranslate"><span class="pre">0</span></code> … <code class="docutils literal notranslate"><span class="pre">999999999</span></code>) <a class="footnote-reference brackets" href="#id9" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%H</span></code></p></td>
<td><p>Hour (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">23</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%h</span></code></p></td>
<td><p>Hour (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">12</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%I</span></code></p></td>
<td><p>Hour (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">12</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%i</span></code></p></td>
<td><p>Minutes, numeric (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">59</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%j</span></code></p></td>
<td><p>Day of year (<code class="docutils literal notranslate"><span class="pre">001</span></code> … <code class="docutils literal notranslate"><span class="pre">366</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%k</span></code></p></td>
<td><p>Hour (<code class="docutils literal notranslate"><span class="pre">0</span></code> … <code class="docutils literal notranslate"><span class="pre">23</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%l</span></code></p></td>
<td><p>Hour (<code class="docutils literal notranslate"><span class="pre">1</span></code> … <code class="docutils literal notranslate"><span class="pre">12</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%M</span></code></p></td>
<td><p>Month name (<code class="docutils literal notranslate"><span class="pre">January</span></code> … <code class="docutils literal notranslate"><span class="pre">December</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%m</span></code></p></td>
<td><p>Month, numeric (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">12</span></code>) <a class="footnote-reference brackets" href="#id12" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%p</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AM</span></code> or <code class="docutils literal notranslate"><span class="pre">PM</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%r</span></code></p></td>
<td><p>Time, 12-hour (<code class="docutils literal notranslate"><span class="pre">hh:mm:ss</span></code> followed by <code class="docutils literal notranslate"><span class="pre">AM</span></code> or <code class="docutils literal notranslate"><span class="pre">PM</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%S</span></code></p></td>
<td><p>Seconds (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">59</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%s</span></code></p></td>
<td><p>Seconds (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">59</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%T</span></code></p></td>
<td><p>Time, 24-hour (<code class="docutils literal notranslate"><span class="pre">hh:mm:ss</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%U</span></code></p></td>
<td><p>Week (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">53</span></code>), where Sunday is the first day of the week</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%u</span></code></p></td>
<td><p>Week (<code class="docutils literal notranslate"><span class="pre">00</span></code> … <code class="docutils literal notranslate"><span class="pre">53</span></code>), where Monday is the first day of the week</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%V</span></code></p></td>
<td><p>Week (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">53</span></code>), where Sunday is the first day of the week; used with <code class="docutils literal notranslate"><span class="pre">%X</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%v</span></code></p></td>
<td><p>Week (<code class="docutils literal notranslate"><span class="pre">01</span></code> … <code class="docutils literal notranslate"><span class="pre">53</span></code>), where Monday is the first day of the week; used with <code class="docutils literal notranslate"><span class="pre">%x</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%W</span></code></p></td>
<td><p>Weekday name (<code class="docutils literal notranslate"><span class="pre">Sunday</span></code> … <code class="docutils literal notranslate"><span class="pre">Saturday</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%w</span></code></p></td>
<td><p>Day of the week (<code class="docutils literal notranslate"><span class="pre">0</span></code> … <code class="docutils literal notranslate"><span class="pre">6</span></code>), where Sunday is the first day of the week <a class="footnote-reference brackets" href="#id11" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%X</span></code></p></td>
<td><p>Year for the week where Sunday is the first day of the week, numeric, four digits; used with <code class="docutils literal notranslate"><span class="pre">%V</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%x</span></code></p></td>
<td><p>Year for the week, where Monday is the first day of the week, numeric, four digits; used with <code class="docutils literal notranslate"><span class="pre">%v</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%Y</span></code></p></td>
<td><p>Year, numeric, four digits</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%y</span></code></p></td>
<td><p>Year, numeric (two digits) <a class="footnote-reference brackets" href="#id10" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%%</span></code></p></td>
<td><p>A literal <code class="docutils literal notranslate"><span class="pre">%</span></code> character</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%x</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span></code>, for any <code class="docutils literal notranslate"><span class="pre">x</span></code> not listed above</p></td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">1</a><span class="fn-bracket">]</span></span>
<p>Timestamp is truncated to milliseconds.</p>
</aside>
<aside class="footnote brackets" id="id10" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">2</a><span class="fn-bracket">]</span></span>
<p>When parsing, two-digit year format assumes range <code class="docutils literal notranslate"><span class="pre">1970</span></code> … <code class="docutils literal notranslate"><span class="pre">2069</span></code>, so “70” will result in year <code class="docutils literal notranslate"><span class="pre">1970</span></code> but “69” will produce <code class="docutils literal notranslate"><span class="pre">2069</span></code>.</p>
</aside>
<aside class="footnote brackets" id="id11" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">3</a><span class="fn-bracket">]</span></span>
<p>This specifier is not supported yet. Consider using <a class="reference internal" href="#day_of_week" title="day_of_week"><code class="xref py py-func docutils literal notranslate"><span class="pre">day_of_week()</span></code></a> (it uses <code class="docutils literal notranslate"><span class="pre">1-7</span></code> instead of <code class="docutils literal notranslate"><span class="pre">0-6</span></code>).</p>
</aside>
<aside class="footnote brackets" id="id12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id3">2</a>,<a role="doc-backlink" href="#id4">3</a>,<a role="doc-backlink" href="#id6">4</a>)</span>
<p>This specifier does not support <code class="docutils literal notranslate"><span class="pre">0</span></code> as a month or day.</p>
</aside>
</aside>
<p><strong>Warning</strong>: The following specifiers are not currently supported: <code class="docutils literal notranslate"><span class="pre">%D</span></code>, <code class="docutils literal notranslate"><span class="pre">%U</span></code>, <code class="docutils literal notranslate"><span class="pre">%u</span></code>, <code class="docutils literal notranslate"><span class="pre">%V</span></code>, <code class="docutils literal notranslate"><span class="pre">%w</span></code>, <code class="docutils literal notranslate"><span class="pre">%X</span></code>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="date_format">
<span class="sig-name descname"><span class="pre">date_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">varchar</span></span></span><a class="headerlink" href="#date_format" title="Link to this definition">¶</a></dt>
<dd><p>Formats <code class="docutils literal notranslate"><span class="pre">x</span></code> as a string using <code class="docutils literal notranslate"><span class="pre">format</span></code>. <code class="docutils literal notranslate"><span class="pre">x</span></code> is a timestamp or a timestamp with time zone.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="date_parse">
<span class="sig-name descname"><span class="pre">date_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span></span></span><a class="headerlink" href="#date_parse" title="Link to this definition">¶</a></dt>
<dd><p>Parses <code class="docutils literal notranslate"><span class="pre">string</span></code> into a timestamp using <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p>
</dd></dl>

</section>
<section id="java-date-functions">
<h2>Java Date Functions<a class="headerlink" href="#java-date-functions" title="Link to this heading">¶</a></h2>
<p>The functions in this section leverage a native cpp implementation that follows
a format string compatible with JodaTime’s <a class="reference external" href="http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html">DateTimeFormat</a>
pattern format. The symbols currently supported are <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, <code class="docutils literal notranslate"><span class="pre">M</span></code> , <code class="docutils literal notranslate"><span class="pre">d</span></code>,
<code class="docutils literal notranslate"><span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code> and <code class="docutils literal notranslate"><span class="pre">Z</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">z</span></code> represents a timezone name (3-letter format), and <code class="docutils literal notranslate"><span class="pre">Z</span></code> a timezone offset
specified using the format <code class="docutils literal notranslate"><span class="pre">+00</span></code>, <code class="docutils literal notranslate"><span class="pre">+00:00</span></code> or <code class="docutils literal notranslate"><span class="pre">+0000</span></code> (or <code class="docutils literal notranslate"><span class="pre">-</span></code>). <code class="docutils literal notranslate"><span class="pre">Z</span></code>
also accepts <code class="docutils literal notranslate"><span class="pre">UTC</span></code>,  <code class="docutils literal notranslate"><span class="pre">UCT</span></code>, <code class="docutils literal notranslate"><span class="pre">GMT</span></code>, and <code class="docutils literal notranslate"><span class="pre">GMT0</span></code> as valid representations
of GMT.</p>
<dl class="py function">
<dt class="sig sig-object py" id="format_datetime">
<span class="sig-name descname"><span class="pre">format_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">varchar</span></span></span><a class="headerlink" href="#format_datetime" title="Link to this definition">¶</a></dt>
<dd><p>Formats <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> as a string using <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="parse_datetime">
<span class="sig-name descname"><span class="pre">parse_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></span></span><a class="headerlink" href="#parse_datetime" title="Link to this definition">¶</a></dt>
<dd><p>Parses string into a timestamp with time zone using <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p>
</dd></dl>

</section>
<section id="convenience-extraction-functions">
<h2>Convenience Extraction Functions<a class="headerlink" href="#convenience-extraction-functions" title="Link to this heading">¶</a></h2>
<p>These functions support TIMESTAMP, DATE, and TIMESTAMP WITH TIME ZONE input types.</p>
<p>For these functions, the input timestamp has range limitations on seconds and nanoseconds.
Seconds should be in the range [INT64_MIN/1000 - 1, INT64_MAX/1000], nanoseconds should
be in the range [0, 999999999]. This behavior is different from Presto Java that allows
arbitrary large timestamps.</p>
<dl class="py function">
<dt class="sig sig-object py" id="day">
<span class="sig-name descname"><span class="pre">day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#day" title="Link to this definition">¶</a></dt>
<dd><p>Returns the day of the month from <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>The supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL DAY TO SECOND.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="day_of_month">
<span class="sig-name descname"><span class="pre">day_of_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#day_of_month" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#day" title="day"><code class="xref py py-func docutils literal notranslate"><span class="pre">day()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="day_of_week">
<span class="sig-name descname"><span class="pre">day_of_week</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#day_of_week" title="Link to this definition">¶</a></dt>
<dd><p>Returns the ISO day of the week from <code class="docutils literal notranslate"><span class="pre">x</span></code>.
The value ranges from <code class="docutils literal notranslate"><span class="pre">1</span></code> (Monday) to <code class="docutils literal notranslate"><span class="pre">7</span></code> (Sunday).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="day_of_year">
<span class="sig-name descname"><span class="pre">day_of_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#day_of_year" title="Link to this definition">¶</a></dt>
<dd><p>Returns the day of the year from <code class="docutils literal notranslate"><span class="pre">x</span></code>.
The value ranges from <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">366</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dow">
<span class="sig-name descname"><span class="pre">dow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#dow" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#day_of_week" title="day_of_week"><code class="xref py py-func docutils literal notranslate"><span class="pre">day_of_week()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="doy">
<span class="sig-name descname"><span class="pre">doy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#doy" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#day_of_year" title="day_of_year"><code class="xref py py-func docutils literal notranslate"><span class="pre">day_of_year()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hour">
<span class="sig-name descname"><span class="pre">hour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#hour" title="Link to this definition">¶</a></dt>
<dd><p>Returns the hour of the day from <code class="docutils literal notranslate"><span class="pre">x</span></code>. The value ranges from 0 to 23.
Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are: DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE,
INTERVAL DAY TO SECOND¶.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="last_day_of_month">
<span class="sig-name descname"><span class="pre">last_day_of_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">date</span></span></span><a class="headerlink" href="#last_day_of_month" title="Link to this definition">¶</a></dt>
<dd><p>Returns the last day of the month.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="millisecond">
<span class="sig-name descname"><span class="pre">millisecond</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int64</span></span></span><a class="headerlink" href="#millisecond" title="Link to this definition">¶</a></dt>
<dd><p>Returns the millisecond of the second from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL DAY TO SECOND¶.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="minute">
<span class="sig-name descname"><span class="pre">minute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#minute" title="Link to this definition">¶</a></dt>
<dd><p>Returns the minute of the hour from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL DAY TO SECOND¶.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="month">
<span class="sig-name descname"><span class="pre">month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#month" title="Link to this definition">¶</a></dt>
<dd><p>Returns the month of the year from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL YEAR TO MONTH.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="quarter">
<span class="sig-name descname"><span class="pre">quarter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#quarter" title="Link to this definition">¶</a></dt>
<dd><p>Returns the quarter of the year from <code class="docutils literal notranslate"><span class="pre">x</span></code>. The value ranges from <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="second">
<span class="sig-name descname"><span class="pre">second</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#second" title="Link to this definition">¶</a></dt>
<dd><p>Returns the second of the minute from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL DAY TO SECOND¶.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="timezone_hour">
<span class="sig-name descname"><span class="pre">timezone_hour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#timezone_hour" title="Link to this definition">¶</a></dt>
<dd><p>Returns the hour of the time zone offset from <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="timezone_minute">
<span class="sig-name descname"><span class="pre">timezone_minute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#timezone_minute" title="Link to this definition">¶</a></dt>
<dd><p>Returns the minute of the time zone offset from <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="week">
<span class="sig-name descname"><span class="pre">week</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#week" title="Link to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_week_date">ISO-Week</a> of the year from x. The value ranges from <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">53</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="week_of_year">
<span class="sig-name descname"><span class="pre">week_of_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#week_of_year" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <code class="docutils literal notranslate"><span class="pre">week()</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="year">
<span class="sig-name descname"><span class="pre">year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#year" title="Link to this definition">¶</a></dt>
<dd><p>Returns the year from <code class="docutils literal notranslate"><span class="pre">x</span></code>. Supported types for <code class="docutils literal notranslate"><span class="pre">x</span></code> are:
DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, INTERVAL YEAR TO MONTH.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="year_of_week">
<span class="sig-name descname"><span class="pre">year_of_week</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#year_of_week" title="Link to this definition">¶</a></dt>
<dd><p>Returns the year of the ISO week from <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yow">
<span class="sig-name descname"><span class="pre">yow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bigint</span></span></span><a class="headerlink" href="#yow" title="Link to this definition">¶</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#year_of_week" title="year_of_week"><code class="xref py py-func docutils literal notranslate"><span class="pre">year_of_week()</span></code></a>.</p>
</dd></dl>

</section>
<section id="time-zones">
<span id="presto-time-zones"></span><h2>Time Zones<a class="headerlink" href="#time-zones" title="Link to this heading">¶</a></h2>
<p>Velox has full support for time zone rules, which are needed to perform date/time
calculations correctly. Typically, the session time zone is used for temporal
calculations. This is the time zone of the client computer that submits the query, if
available. Otherwise, it is the time zone of the server running the Presto coordinator.</p>
<p>Queries that operate with time zones that follow daylight saving can produce unexpected
results. For example, if we run the following query in the <cite>America/Los Angeles</cite> time
zone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">date_add</span><span class="p">(</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2014-03-08 09:00:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">));</span>
<span class="o">--</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">09</span> <span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>
</pre></div>
</div>
<p>The timestamp appears to only advance 23 hours. This is because on March 9th clocks in
<cite>America/Los Angeles</cite> are turned forward 1 hour, so March 9th only has 23 hours. To
advance the day part of the timestamp, use the <cite>day</cite> unit instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">date_add</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2014-03-08 09:00:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">));</span>
<span class="o">--</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">09</span> <span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>
</pre></div>
</div>
<p>This works because the <a class="reference internal" href="#date_add" title="date_add"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_add()</span></code></a> function treats the timestamp as list of fields, adds
the value to the specified field and then rolls any overflow into the next higher field.</p>
<p>Time zones are also necessary for parsing and printing timestamps. Queries that use this
functionality can also produce unexpected results. For example, on the same machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2014-03-09 02:30:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
</pre></div>
</div>
<p>The above query causes an error because there was no 2:30 AM on March 9th in
<cite>America/Los_Angeles</cite> due to a daylight saving time transition.</p>
<p>Similarly, the following query has two possible outcomes due to a daylight saving time
transition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;2014-11-02 01:30:00&#39;</span> <span class="k">as</span> <span class="n">timestamp</span><span class="p">);</span>
<span class="o">--</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">02</span> <span class="mi">08</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mf">00.000</span>
</pre></div>
</div>
<p>It can be interpreted as <cite>2014-11-02 01:30:00 PDT</cite>, or <cite>2014-11-02 01:30:00 PST</cite>, which are
<cite>2014-11-02 08:30:00 UTC</cite> or <cite>2014-11-02 09:30:00 UTC</cite> respectively. The former one is
picked to be consistent with Presto.</p>
<p><strong>Timezone Name Parsing</strong>: When parsing strings that contain timezone names, the
list of supported timezones follow the definition <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">here</a>.</p>
<p><strong>Timezone Conversion</strong>: The <code class="docutils literal notranslate"><span class="pre">AT</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> operator sets the time zone of a timestamp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">timestamp</span> <span class="s1">&#39;2012-10-31 01:00 UTC&#39;</span><span class="p">;</span>
<span class="o">--</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">31</span> <span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span> <span class="n">UTC</span>

<span class="n">SELECT</span> <span class="n">timestamp</span> <span class="s1">&#39;2012-10-31 01:00 UTC&#39;</span> <span class="n">AT</span> <span class="n">TIME</span> <span class="n">ZONE</span> <span class="s1">&#39;America/Los_Angeles&#39;</span><span class="p">;</span>
<span class="o">--</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">30</span> <span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span> <span class="n">America</span><span class="o">/</span><span class="n">Los_Angeles</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Date and Time Functions and Operators</a><ul>
<li><a class="reference internal" href="#date-and-time-operators">Date and Time Operators</a><ul>
<li><a class="reference internal" href="#plus"><code class="docutils literal notranslate"><span class="pre">plus()</span></code></a></li>
<li><a class="reference internal" href="#minus"><code class="docutils literal notranslate"><span class="pre">minus()</span></code></a></li>
<li><a class="reference internal" href="#multiply"><code class="docutils literal notranslate"><span class="pre">multiply()</span></code></a></li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">multiply()</span></code></a></li>
<li><a class="reference internal" href="#divide"><code class="docutils literal notranslate"><span class="pre">divide()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#date-and-time-functions">Date and Time Functions</a><ul>
<li><a class="reference internal" href="#current_date"><code class="docutils literal notranslate"><span class="pre">current_date()</span></code></a></li>
<li><a class="reference internal" href="#date"><code class="docutils literal notranslate"><span class="pre">date()</span></code></a></li>
<li><a class="reference internal" href="#from_iso8601_date"><code class="docutils literal notranslate"><span class="pre">from_iso8601_date()</span></code></a></li>
<li><a class="reference internal" href="#from_iso8601_timestamp"><code class="docutils literal notranslate"><span class="pre">from_iso8601_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#from_unixtime"><code class="docutils literal notranslate"><span class="pre">from_unixtime()</span></code></a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">from_unixtime()</span></code></a></li>
<li><a class="reference internal" href="#to_iso8601"><code class="docutils literal notranslate"><span class="pre">to_iso8601()</span></code></a></li>
<li><a class="reference internal" href="#to_milliseconds"><code class="docutils literal notranslate"><span class="pre">to_milliseconds()</span></code></a></li>
<li><a class="reference internal" href="#to_unixtime"><code class="docutils literal notranslate"><span class="pre">to_unixtime()</span></code></a></li>
<li><a class="reference internal" href="#current_timezone"><code class="docutils literal notranslate"><span class="pre">current_timezone()</span></code></a></li>
<li><a class="reference internal" href="#current_timestamp"><code class="docutils literal notranslate"><span class="pre">current_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#now"><code class="docutils literal notranslate"><span class="pre">now()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#truncation-function">Truncation Function</a><ul>
<li><a class="reference internal" href="#date_trunc"><code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#interval-functions">Interval Functions</a><ul>
<li><a class="reference internal" href="#date_add"><code class="docutils literal notranslate"><span class="pre">date_add()</span></code></a></li>
<li><a class="reference internal" href="#date_diff"><code class="docutils literal notranslate"><span class="pre">date_diff()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#duration-function">Duration Function</a><ul>
<li><a class="reference internal" href="#parse_duration"><code class="docutils literal notranslate"><span class="pre">parse_duration()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#mysql-date-functions">MySQL Date Functions</a><ul>
<li><a class="reference internal" href="#date_format"><code class="docutils literal notranslate"><span class="pre">date_format()</span></code></a></li>
<li><a class="reference internal" href="#date_parse"><code class="docutils literal notranslate"><span class="pre">date_parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#java-date-functions">Java Date Functions</a><ul>
<li><a class="reference internal" href="#format_datetime"><code class="docutils literal notranslate"><span class="pre">format_datetime()</span></code></a></li>
<li><a class="reference internal" href="#parse_datetime"><code class="docutils literal notranslate"><span class="pre">parse_datetime()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#convenience-extraction-functions">Convenience Extraction Functions</a><ul>
<li><a class="reference internal" href="#day"><code class="docutils literal notranslate"><span class="pre">day()</span></code></a></li>
<li><a class="reference internal" href="#day_of_month"><code class="docutils literal notranslate"><span class="pre">day_of_month()</span></code></a></li>
<li><a class="reference internal" href="#day_of_week"><code class="docutils literal notranslate"><span class="pre">day_of_week()</span></code></a></li>
<li><a class="reference internal" href="#day_of_year"><code class="docutils literal notranslate"><span class="pre">day_of_year()</span></code></a></li>
<li><a class="reference internal" href="#dow"><code class="docutils literal notranslate"><span class="pre">dow()</span></code></a></li>
<li><a class="reference internal" href="#doy"><code class="docutils literal notranslate"><span class="pre">doy()</span></code></a></li>
<li><a class="reference internal" href="#hour"><code class="docutils literal notranslate"><span class="pre">hour()</span></code></a></li>
<li><a class="reference internal" href="#last_day_of_month"><code class="docutils literal notranslate"><span class="pre">last_day_of_month()</span></code></a></li>
<li><a class="reference internal" href="#millisecond"><code class="docutils literal notranslate"><span class="pre">millisecond()</span></code></a></li>
<li><a class="reference internal" href="#minute"><code class="docutils literal notranslate"><span class="pre">minute()</span></code></a></li>
<li><a class="reference internal" href="#month"><code class="docutils literal notranslate"><span class="pre">month()</span></code></a></li>
<li><a class="reference internal" href="#quarter"><code class="docutils literal notranslate"><span class="pre">quarter()</span></code></a></li>
<li><a class="reference internal" href="#second"><code class="docutils literal notranslate"><span class="pre">second()</span></code></a></li>
<li><a class="reference internal" href="#timezone_hour"><code class="docutils literal notranslate"><span class="pre">timezone_hour()</span></code></a></li>
<li><a class="reference internal" href="#timezone_minute"><code class="docutils literal notranslate"><span class="pre">timezone_minute()</span></code></a></li>
<li><a class="reference internal" href="#week"><code class="docutils literal notranslate"><span class="pre">week()</span></code></a></li>
<li><a class="reference internal" href="#week_of_year"><code class="docutils literal notranslate"><span class="pre">week_of_year()</span></code></a></li>
<li><a class="reference internal" href="#year"><code class="docutils literal notranslate"><span class="pre">year()</span></code></a></li>
<li><a class="reference internal" href="#year_of_week"><code class="docutils literal notranslate"><span class="pre">year_of_week()</span></code></a></li>
<li><a class="reference internal" href="#yow"><code class="docutils literal notranslate"><span class="pre">yow()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-zones">Time Zones</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="string.html"
                          title="previous chapter">String Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="array.html"
                          title="next chapter">Array Functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/functions/presto/datetime.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="array.html" title="Array Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="string.html" title="String Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Velox  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../functions.html" >Presto Functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Date and Time Functions and Operators</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright TBD.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>